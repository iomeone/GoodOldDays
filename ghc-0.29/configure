#! /bin/sh

# Guess values for system-dependent variables and create Makefiles.
# Generated automatically using autoconf version 2.9 
# Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
#
# This configure script is free software; the Free Software Foundation
# gives unlimited permission to copy, distribute and modify it.

# Defaults:
ac_help=
ac_default_prefix=/usr/local
# Any additions from configure.in:
ac_help="$ac_help

**********************************************************************
* Configuration options for the Glasgow functional-programming tools *
**********************************************************************

First, select *which* of the tools you want to build,
with --{enable,disable}-{ghc,hslibs,nofib,happy,haggis}.
(The default is: only GHC (Glasgow Haskell compiler).)

Second, you may set one of a few applies-in-all-cases options.
For example, --with-tmpdir=/usr/tmp.

Then you may set various options which are specifically for the
tools you choose in step 1.  For GHC, perhaps --enable-concurrent.
For NoFib, perhaps --enable-all-tests.  And so on.

The rest of this message lists all of the configure options.  If the
option is enabled by default, the message says how to disable it.  And
vice versa.

If you are confused, don't forget the installation documents that came
with the software!

*******************************************************************
** FOR SELECTING WHICH GLASGOW FP TOOLS TO BUILD:

--disable-ghc     do *not* build GHC as part of Glasgow FP tools"
ac_help="$ac_help
--enable-hslibs   build suite of Haskell libraries"
ac_help="$ac_help
--enable-nofib    build NoFib suite as part of Glasgow FP tools"
ac_help="$ac_help
--enable-happy    build Happy parser-generator as part of Glasgow FP tools"
ac_help="$ac_help
--enable-haggis   build Haggis GUI toolkit as part of Glasgow FP tools"
ac_help="$ac_help

The following three are \`for hackers only':
--disable-literate    do *not* build literate-programming stuff"
ac_help="$ac_help
--disable-mkworld     do *not* build \`mkworld' configuration stuff"
ac_help="$ac_help
--disable-glafp-utils do *not* build \`glafp utilities'"
ac_help="$ac_help

*******************************************************************
** GENERAL OPTIONS WHICH APPLY TO ALL TOOLS:

--with-hc=<Haskell compiler>
          ghc*     => Glasgow Haskell invoked by the name given
          hbc*     => Chalmers HBC, invoked by the name given
          nhc*     => Niklas Rojemo's "nhc", invoked by the name given
          C or c   => Don't use a Haskell compiler;
                      build from intermediate C (.hc) files.
          in-place => Use ghc/driver/ghc; i.e. you've built GHC
                      and you want to use it un-installed ("in-place").
   "
ac_help="$ac_help
--with-gcc=<gcc command>
	Use a different command instead of 'gcc' for the GNU C compiler."
ac_help="$ac_help
 
--with-make=<make command> 
	Use an alternate command instead of 'make'."
ac_help="$ac_help

--with-tmpdir=<temp directory> 
	Use an alternative directory for temporary files (presumably
	because /tmp is too small)."
ac_help="$ac_help

--with-max-heap=<heap size, e.g., 32m> 
	Do all Haskell compilations with a heap of this size.  (If
	you've got it, flaunt it.)"
ac_help="$ac_help
--with-mkdependHS=<mkdependHS command>
	Use a different command instead of 'mkdependHS'."
ac_help="$ac_help

*******************************************************************
** \`GHC' (GLASGOW HASKELL COMPILER) OPTIONS:

Choose all the \`builds' of GHC that you want:

--disable-normal-build do *not* build GHC for normal sequential code"
ac_help="$ac_help
--disable-profiling    do *not* build profiling features"
ac_help="$ac_help
--enable-ticky         build for \`ticky-ticky' profiling (for implementors)"
ac_help="$ac_help
--enable-concurrent    turn on \`concurrent Haskell' features"
ac_help="$ac_help
--enable-profiled-concurrent turn on profiling for \`concurrent Haskell'"
ac_help="$ac_help
--enable-ticky-concurrent turn on \`ticky-ticky' profiling for \`concurrent Haskell'"
ac_help="$ac_help
--enable-parallel      turn on \`parallel Haskell' features"
ac_help="$ac_help
--enable-gransim       turn on GranSim parallel simulator"
ac_help="$ac_help
--enable-gc-2s         a build with the 2-space copying garbage collector"
ac_help="$ac_help
--enable-gc-1s         a build with the 1-space compacting garbage collector"
ac_help="$ac_help
--enable-gc-du         a build with \`dual-mode' (1s/2s) garbage collector"
ac_help="$ac_help
--enable-user-way-a    build for \`user way a' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-b    build for \`user way b' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-c    build for \`user way c' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-d    build for \`user way d' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-e    build for \`user way e' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-f    build for \`user way f' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-g    build for \`user way g' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-h    build for \`user way h' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-i    build for \`user way i' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-j    build for \`user way j' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-k    build for \`user way k' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-l    build for \`user way l' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-m    build for \`user way m' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-n    build for \`user way n' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-o    build for \`user way o' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-A    build for \`user way A' (mostly for implementors)"
ac_help="$ac_help
--enable-user-way-B    build for \`user way B' (mostly for implementors)"
ac_help="$ac_help

The Haskell compiler for bootstrapping GHC (if any); this option,
if used, overrides --with-hc=<...>:

    --with-hc-for-ghc=<Haskell compiler>
          ghc*     => Glasgow Haskell invoked by the name given
          C or c   => Don't use a Haskell compiler;
                      build from intermediate C (.hc) files.
   "
ac_help="$ac_help
Other things for GHC:

--enable-portable-C       use portable C (slow), not \`registerised' (fast)"
ac_help="$ac_help
--enable-hsc-built-via-C  build compiler proper (hsc) from intermediate .hc
                          files (disabled by default)"
ac_help="$ac_help
--disable-hsc-optimised   don't build compiler proper (hsc) with -O"
ac_help="$ac_help
--enable-hsc-debug        build compiler proper (hsc) with -DDEBUG"
ac_help="$ac_help
--enable-native-code-generator  build an n.c.g.
                          [enabled for supported platforms]"
ac_help="$ac_help
--enable-deforester       build deforester into compiler (HACKERS ONLY)"
ac_help="$ac_help
--enable-readline-library include (GNU) readline library in -syslib GHC"
ac_help="$ac_help
--enable-sockets-library  include the network-interface (sockets) library in -syslib GHC"
ac_help="$ac_help
--enable-ghci             build Glasgow Haskell interpreter (HACKERS ONLY)"
ac_help="$ac_help

*******************************************************************
** \`HsLibs' HASKELL LIBRARIES OPTIONS:

The Haskell compiler to compile the Haskell Libraries suite; this
option, if used, overrides --with-hc=<...>:

    --with-hc-for-hslibs=<Haskell compiler>
          ghc*     => Glasgow Haskell invoked by the name given
                      and you want to use it un-installed ("in-place")."
ac_help="$ac_help

*******************************************************************
** \`Happy' PARSER-GENERATOR OPTIONS:

The Haskell compiler to compile Happy; this option, if used, overrides
--with-hc=<...>:

    --with-hc-for-happy=<Haskell compiler>
          ghc*     => Glasgow Haskell invoked by the name given
          hbc*     => Chalmers HBC, invoked by the name given
          nhc*     => Niklas Rojemo's "nhc", invoked by the name given
          in-place => Use ghc/driver/ghc; i.e. you've built GHC
                      and you want to use it un-installed ("in-place")."
ac_help="$ac_help

*******************************************************************
** \`Haggis' HASKELL GUI TOOLKIT OPTIONS:

The Haskell compiler to compile the Haggis toolkit; this option, if
used, overrides --with-hc=<...>:

    --with-hc-for-haggis=<Haskell compiler>
          ghc*     => Glasgow Haskell invoked by the name given
                      and you want to use it un-installed ("in-place")."
ac_help="$ac_help

*******************************************************************
** Literate programming system OPTIONS:

--enable-info-utils       build GNU info/makeinfo utilities"
ac_help="$ac_help

*******************************************************************
** NoFib HASKELL BENCHMARK SUITE OPTIONS:

The Haskell compiler to compile the NoFib programs; this option, if
used, overrides --with-hc=<...>:

    --with-hc-for-nofib=<Haskell compiler>
          ghc*     => Glasgow Haskell invoked by the name given
          hbc*     => Chalmers HBC, invoked by the name given
          nhc*     => Niklas Rojemo's "nhc", invoked by the name given
          in-place => Use ghc/driver/ghc; i.e. you've built GHC
                      and you want to use it un-installed ("in-place").
   "
ac_help="$ac_help

--with-setup=<setup> : What mkworld \`setup' should be used?
                       Choices: ghc, hbc, nhc
"
ac_help="$ac_help
Possibly turn on *all* of the possible tests (a sane choice
only if using GHC):

--enable-all-tests    do *all* tests"
ac_help="$ac_help

Enable/disable individual categories of tests:

--disable-imaginary-tests do *not* include imaginary tests"
ac_help="$ac_help
--disable-spectral-tests  do *not* include spectral tests"
ac_help="$ac_help
--disable-real-tests      do *not* include real tests"
ac_help="$ac_help
--enable-GHC-ONLY-tests   include GHC_ONLY tests"
ac_help="$ac_help
--enable-specialise-tests  include specialisation tests"
ac_help="$ac_help
--enable-PRIVATE-tests    include PRIVATE tests"
ac_help="$ac_help
--enable-parallel-tests   include parallel tests
"

# Initialize some variables set by options.
# The variables have the same names as the options, with
# dashes changed to underlines.
build=NONE
cache_file=./config.cache
exec_prefix=NONE
host=NONE
no_create=
nonopt=NONE
no_recursion=
prefix=NONE
program_prefix=NONE
program_suffix=NONE
program_transform_name=s,x,x,
silent=
site=
srcdir=
target=NONE
verbose=
x_includes=NONE
x_libraries=NONE
bindir='${exec_prefix}/bin'
sbindir='${exec_prefix}/sbin'
libexecdir='${exec_prefix}/libexec'
datadir='${prefix}/share'
sysconfdir='${prefix}/etc'
sharedstatedir='${prefix}/com'
localstatedir='${prefix}/var'
libdir='${exec_prefix}/lib'
includedir='${prefix}/include'
oldincludedir='/usr/include'
infodir='${prefix}/info'
mandir='${prefix}/man'

# Initialize some other variables.
subdirs=
MFLAGS= MAKEFLAGS=

ac_prev=
for ac_option
do

  # If the previous option needs an argument, assign it.
  if test -n "$ac_prev"; then
    eval "$ac_prev=\$ac_option"
    ac_prev=
    continue
  fi

  case "$ac_option" in
  -*=*) ac_optarg=`echo "$ac_option" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
  *) ac_optarg= ;;
  esac

  # Accept the important Cygnus configure options, so we can diagnose typos.

  case "$ac_option" in

  -bindir | --bindir | --bindi | --bind | --bin | --bi)
    ac_prev=bindir ;;
  -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
    bindir="$ac_optarg" ;;

  -build | --build | --buil | --bui | --bu)
    ac_prev=build ;;
  -build=* | --build=* | --buil=* | --bui=* | --bu=*)
    build="$ac_optarg" ;;

  -cache-file | --cache-file | --cache-fil | --cache-fi \
  | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
    ac_prev=cache_file ;;
  -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
  | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
    cache_file="$ac_optarg" ;;

  -datadir | --datadir | --datadi | --datad | --data | --dat | --da)
    ac_prev=datadir ;;
  -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \
  | --da=*)
    datadir="$ac_optarg" ;;

  -disable-* | --disable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*disable-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    eval "enable_${ac_feature}=no" ;;

  -enable-* | --enable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*enable-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "enable_${ac_feature}='$ac_optarg'" ;;

  -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
  | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
  | --exec | --exe | --ex)
    ac_prev=exec_prefix ;;
  -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
  | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
  | --exec=* | --exe=* | --ex=*)
    exec_prefix="$ac_optarg" ;;

  -gas | --gas | --ga | --g)
    # Obsolete; use --with-gas.
    with_gas=yes ;;

  -help | --help | --hel | --he)
    # Omit some internal or obsolete options to make the list less imposing.
    # This message is too long to be a string in the A/UX 3.1 sh.
    cat << EOF
Usage: configure [options] [host]
Options: [defaults in brackets after descriptions]
Configuration:
  --cache-file=FILE       cache test results in FILE
  --help                  print this message
  --no-create             do not create output files
  --quiet, --silent       do not print \`checking...' messages
  --version               print the version of autoconf that created configure
Directory and file names:
  --prefix=PREFIX         install architecture-independent files in PREFIX
                          [$ac_default_prefix]
  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
                          [same as prefix]
  --bindir=DIR            user executables in DIR [EPREFIX/bin]
  --sbindir=DIR           system admin executables in DIR [EPREFIX/sbin]
  --libexecdir=DIR        program executables in DIR [EPREFIX/libexec]
  --datadir=DIR           read-only architecture-independent data in DIR
                          [PREFIX/share]
  --sysconfdir=DIR        read-only single-machine data in DIR [PREFIX/etc]
  --sharedstatedir=DIR    modifiable architecture-independent data in DIR
                          [PREFIX/com]
  --localstatedir=DIR     modifiable single-machine data in DIR [PREFIX/var]
  --libdir=DIR            object code libraries in DIR [EPREFIX/lib]
  --includedir=DIR        C header files in DIR [PREFIX/include]
  --oldincludedir=DIR     C header files for non-gcc in DIR [/usr/include]
  --infodir=DIR           info documentation in DIR [PREFIX/info]
  --mandir=DIR            man documentation in DIR [PREFIX/man]
  --srcdir=DIR            find the sources in DIR [configure dir or ..]
  --program-prefix=PREFIX prepend PREFIX to installed program names
  --program-suffix=SUFFIX append SUFFIX to installed program names
  --program-transform-name=PROGRAM
                          run sed PROGRAM on installed program names
EOF
    cat << EOF
Host type:
  --build=BUILD           configure for building on BUILD [BUILD=HOST]
  --host=HOST             configure for HOST [guessed]
  --target=TARGET         configure for TARGET [TARGET=HOST]
Features and packages:
  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
  --x-includes=DIR        X include files are in DIR
  --x-libraries=DIR       X library files are in DIR
EOF
    if test -n "$ac_help"; then
      echo "--enable and --with options recognized:$ac_help"
    fi
    exit 0 ;;

  -host | --host | --hos | --ho)
    ac_prev=host ;;
  -host=* | --host=* | --hos=* | --ho=*)
    host="$ac_optarg" ;;

  -includedir | --includedir | --includedi | --included | --include \
  | --includ | --inclu | --incl | --inc)
    ac_prev=includedir ;;
  -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
  | --includ=* | --inclu=* | --incl=* | --inc=*)
    includedir="$ac_optarg" ;;

  -infodir | --infodir | --infodi | --infod | --info | --inf)
    ac_prev=infodir ;;
  -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
    infodir="$ac_optarg" ;;

  -libdir | --libdir | --libdi | --libd)
    ac_prev=libdir ;;
  -libdir=* | --libdir=* | --libdi=* | --libd=*)
    libdir="$ac_optarg" ;;

  -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
  | --libexe | --libex | --libe)
    ac_prev=libexecdir ;;
  -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
  | --libexe=* | --libex=* | --libe=*)
    libexecdir="$ac_optarg" ;;

  -localstatedir | --localstatedir | --localstatedi | --localstated \
  | --localstate | --localstat | --localsta | --localst \
  | --locals | --local | --loca | --loc | --lo)
    ac_prev=localstatedir ;;
  -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
  | --localstate=* | --localstat=* | --localsta=* | --localst=* \
  | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)
    localstatedir="$ac_optarg" ;;

  -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
    ac_prev=mandir ;;
  -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
    mandir="$ac_optarg" ;;

  -nfp | --nfp | --nf)
    # Obsolete; use --without-fp.
    with_fp=no ;;

  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c)
    no_create=yes ;;

  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
    no_recursion=yes ;;

  -oldincludedir | --oldincludedir | --oldincludedi | --oldincluded \
  | --oldinclude | --oldinclud | --oldinclu | --oldincl | --oldinc \
  | --oldin | --oldi | --old | --ol | --o)
    ac_prev=oldincludedir ;;
  -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
  | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
  | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
    oldincludedir="$ac_optarg" ;;

  -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
    ac_prev=prefix ;;
  -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
    prefix="$ac_optarg" ;;

  -program-prefix | --program-prefix | --program-prefi | --program-pref \
  | --program-pre | --program-pr | --program-p)
    ac_prev=program_prefix ;;
  -program-prefix=* | --program-prefix=* | --program-prefi=* \
  | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
    program_prefix="$ac_optarg" ;;

  -program-suffix | --program-suffix | --program-suffi | --program-suff \
  | --program-suf | --program-su | --program-s)
    ac_prev=program_suffix ;;
  -program-suffix=* | --program-suffix=* | --program-suffi=* \
  | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
    program_suffix="$ac_optarg" ;;

  -program-transform-name | --program-transform-name \
  | --program-transform-nam | --program-transform-na \
  | --program-transform-n | --program-transform- \
  | --program-transform | --program-transfor \
  | --program-transfo | --program-transf \
  | --program-trans | --program-tran \
  | --progr-tra | --program-tr | --program-t)
    ac_prev=program_transform_name ;;
  -program-transform-name=* | --program-transform-name=* \
  | --program-transform-nam=* | --program-transform-na=* \
  | --program-transform-n=* | --program-transform-=* \
  | --program-transform=* | --program-transfor=* \
  | --program-transfo=* | --program-transf=* \
  | --program-trans=* | --program-tran=* \
  | --progr-tra=* | --program-tr=* | --program-t=*)
    program_transform_name="$ac_optarg" ;;

  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
  | -silent | --silent | --silen | --sile | --sil)
    silent=yes ;;

  -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
    ac_prev=sbindir ;;
  -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
  | --sbi=* | --sb=*)
    sbindir="$ac_optarg" ;;

  -sharedstatedir | --sharedstatedir | --sharedstatedi \
  | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
  | --sharedst | --shareds | --shared | --share | --shar \
  | --sha | --sh)
    ac_prev=sharedstatedir ;;
  -sharedstatedir=* | --sharedstatedir=* | --sharedstatedi=* \
  | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
  | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
  | --sha=* | --sh=*)
    sharedstatedir="$ac_optarg" ;;

  -site | --site | --sit)
    ac_prev=site ;;
  -site=* | --site=* | --sit=*)
    site="$ac_optarg" ;;

  -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
    ac_prev=srcdir ;;
  -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
    srcdir="$ac_optarg" ;;

  -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
  | --syscon | --sysco | --sysc | --sys | --sy)
    ac_prev=sysconfdir ;;
  -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
  | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
    sysconfdir="$ac_optarg" ;;

  -target | --target | --targe | --targ | --tar | --ta | --t)
    ac_prev=target ;;
  -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
    target="$ac_optarg" ;;

  -v | -verbose | --verbose | --verbos | --verbo | --verb)
    verbose=yes ;;

  -version | --version | --versio | --versi | --vers)
    echo "configure generated by autoconf version 2.9"
    exit 0 ;;

  -with-* | --with-*)
    ac_package=`echo $ac_option|sed -e 's/-*with-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "with_${ac_package}='$ac_optarg'" ;;

  -without-* | --without-*)
    ac_package=`echo $ac_option|sed -e 's/-*without-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    eval "with_${ac_package}=no" ;;

  --x)
    # Obsolete; use --with-x.
    with_x=yes ;;

  -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \
  | --x-incl | --x-inc | --x-in | --x-i)
    ac_prev=x_includes ;;
  -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
  | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
    x_includes="$ac_optarg" ;;

  -x-libraries | --x-libraries | --x-librarie | --x-librari \
  | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
    ac_prev=x_libraries ;;
  -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
  | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
    x_libraries="$ac_optarg" ;;

  -*) { echo "configure: error: $ac_option: invalid option; use --help to show usage" 1>&2; exit 1; }
    ;;

  *)
    if test -n "`echo $ac_option| sed 's/[-a-z0-9.]//g'`"; then
      echo "configure: warning: $ac_option: invalid host type" 1>&2
    fi
    if test "x$nonopt" != xNONE; then
      { echo "configure: error: can only configure for one host and one target at a time" 1>&2; exit 1; }
    fi
    nonopt="$ac_option"
    ;;

  esac
done

if test -n "$ac_prev"; then
  { echo "configure: error: missing argument to --`echo $ac_prev | sed 's/_/-/g'`" 1>&2; exit 1; }
fi

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

# File descriptor usage:
# 0 standard input
# 1 file creation
# 2 errors and warnings
# 3 some systems may open it to /dev/tty
# 4 used on the Kubota Titan
# 6 checking for... messages and results
# 5 compiler messages saved in config.log
if test "$silent" = yes; then
  exec 6>/dev/null
else
  exec 6>&1
fi
exec 5>./config.log

echo "\
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.
" 1>&5

# Strip out --no-create and --no-recursion so they do not pile up.
# Also quote any args containing shell metacharacters.
ac_configure_args=
for ac_arg
do
  case "$ac_arg" in
  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c) ;;
  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
  ac_configure_args="$ac_configure_args '$ac_arg'" ;;
  *) ac_configure_args="$ac_configure_args $ac_arg" ;;
  esac
done

# NLS nuisances.
# Only set LANG and LC_ALL to C if already set.
# These must not be set unconditionally because not all systems understand
# e.g. LANG=C (notably SCO).
if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi

# confdefs.h avoids OS command line length limits that DEFS can exceed.
rm -rf conftest* confdefs.h
# AIX cpp loses on an empty file, so make sure it contains at least a newline.
echo > confdefs.h

# A filename unique to this package, relative to the directory that
# configure is in, which we can look for to find out if srcdir is correct.
ac_unique_file=STARTUP.in

# Find the source files, if location was not specified.
if test -z "$srcdir"; then
  ac_srcdir_defaulted=yes
  # Try the directory containing this script, then its parent.
  ac_prog=$0
  ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
  test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
  srcdir=$ac_confdir
  if test ! -r $srcdir/$ac_unique_file; then
    srcdir=..
  fi
else
  ac_srcdir_defaulted=no
fi
if test ! -r $srcdir/$ac_unique_file; then
  if test "$ac_srcdir_defaulted" = yes; then
    { echo "configure: error: can not find sources in $ac_confdir or .." 1>&2; exit 1; }
  else
    { echo "configure: error: can not find sources in $srcdir" 1>&2; exit 1; }
  fi
fi
srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`

# Prefer explicitly selected file to automatically selected ones.
if test -z "$CONFIG_SITE"; then
  if test "x$prefix" != xNONE; then
    CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
  else
    CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
  fi
fi
for ac_site_file in $CONFIG_SITE; do
  if test -r "$ac_site_file"; then
    echo "loading site script $ac_site_file"
    . "$ac_site_file"
  fi
done

if test -r "$cache_file"; then
  echo "loading cache $cache_file"
  . $cache_file
else
  echo "creating cache $cache_file"
  > $cache_file
fi

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'

if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
  # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
  if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
    ac_n= ac_c='
' ac_t='	'
  else
    ac_n=-n ac_c= ac_t=
  fi
else
  ac_n= ac_c='\c' ac_t=
fi


#
# Prepare to generate the following header files
#

# ToDo !!!!!!!!!!!!!!!!
#
# No, we don't do `--srcdir'...
if test x"$srcdir" != 'x.' ; then
    echo "This configuration does not support the \`--srcdir' option."
    exit 1
fi

# -------------------------------------------------------------------------

# set to the name for the dir if doing it, otherwise empty
DoingGHC='ghc'
DoingHsLibs=''
DoingNoFib=''
DoingHappy=''
DoingHaggis=''
# the following are not normally changed
DoingLiterate='literate'
DoingMkWorld='mkworld'
DoingGlaFpUtils='glafp-utils'

MkWorldSetup='std'

# Check whether --enable-ghc or --disable-ghc was given.
if test "${enable_ghc+set}" = set; then
  enableval="$enable_ghc"
  case "$enableval" in
        yes) DoingGHC='ghc'
             ;;
        no)  DoingGHC=''
             ;;
        *)   echo "I don't understand this option: --enable-ghc=$enableval"
             exit 1
             ;;
    esac
fi

if test "xxx$DoingGHC" = 'xxxghc' -a \( ! -d ghc \) ; then
    DoingGHC=''
    echo 'Doing --disable-ghc, as there is no ghc directory'
fi
ghc_mkworld_site_ghc_jm='ghc/mkworld/site-ghc.jm'
ghc_includes_platform_h='ghc/includes/platform.h'
# duznae work: ghc_includes_config_h='ghc/includes/config.h'
if test "xxx$DoingGHC" = 'xxx' ; then
    ghc_mkworld_site_ghc_jm=''
    ghc_includes_platform_h=''
#   ghc_includes_config_h=''
fi

# Check whether --enable-hslibs or --disable-hslibs was given.
if test "${enable_hslibs+set}" = set; then
  enableval="$enable_hslibs"
  case "$enableval" in
        yes) DoingHsLibs='hslibs'
             ;;
        no)  DoingHsLibs=''
             ;;
        *)   echo "I don't understand this option: --enable-hslibs=$enableval"
             exit 1
             ;;
    esac
fi

if test "xxx$DoingHsLibs" = 'xxxhslibs' -a \( ! -d hslibs \) ; then
    DoingHsLibs=''
    echo 'Doing --disable-hslibs, as there is no hslibs directory'
fi
hslibs_mkworld_site_hslibs_jm='hslibs/mkworld/site-hslibs.jm'
if test "xxx$DoingHsLibs" = 'xxx' ; then
    hslibs_mkworld_site_hslibs_jm=''
fi

# Check whether --enable-nofib or --disable-nofib was given.
if test "${enable_nofib+set}" = set; then
  enableval="$enable_nofib"
  case "$enableval" in
        yes) DoingNoFib='nofib'
             ;;
        no)  DoingNoFib=''
             ;;
        *)   echo "I don't understand this option: --enable-nofib=$enableval"
             exit 1
             ;;
    esac
fi

if test "xxx$DoingNoFib" = 'xxxnofib' -a \( ! -d nofib \) ; then
    DoingNoFib=''
    echo 'Doing --disable-nofib, as there is no nofib directory'
fi
nofib_mkworld_site_nofib_jm='nofib/mkworld/site-nofib.jm'
if test "xxx$DoingNoFib" = 'xxx' ; then
    nofib_mkworld_site_nofib_jm=''
fi

# Check whether --enable-happy or --disable-happy was given.
if test "${enable_happy+set}" = set; then
  enableval="$enable_happy"
  case "$enableval" in
        yes) DoingHappy='happy'
             ;;
        no)  DoingHappy=''
             ;;
        *)   echo "I don't understand this option: --enable-happy=$enableval"
             exit 1
             ;;
    esac
fi

if test "xxx$DoingHappy" = 'xxxhappy' -a \( ! -d happy \) ; then
    DoingHappy=''
    echo 'Doing --disable-happy, as there is no happy directory'
fi

# Check whether --enable-haggis or --disable-haggis was given.
if test "${enable_haggis+set}" = set; then
  enableval="$enable_haggis"
  case "$enableval" in
        yes) DoingHaggis='haggis'
             ;;
        no)  DoingHaggis=''
             ;;
        *)   echo "I don't understand this option: --enable-haggis=$enableval"
             exit 1
             ;;
    esac
fi

if test "xxx$DoingHaggis" = 'xxxhaggis' -a \( ! -d haggis \) ; then
    DoingHaggis=''
    echo 'Doing --disable-haggis, as there is no haggis directory'
fi

# Check whether --enable-literate or --disable-literate was given.
if test "${enable_literate+set}" = set; then
  enableval="$enable_literate"
  case "$enableval" in
        yes) DoingLiterate='literate'
             ;;
        no)  DoingLiterate=''
             ;;
        *)   echo "I don't understand this option: --enable-literate=$enableval"
             exit 1
             ;;
    esac
fi

if test "xxx$DoingLiterate" = 'xxxliterate' -a \( ! -d literate \) ; then
    DoingLiterate=''
    echo 'Doing --disable-literate, as there is no literate directory'
fi

# Check whether --enable-mkworld or --disable-mkworld was given.
if test "${enable_mkworld+set}" = set; then
  enableval="$enable_mkworld"
  case "$enableval" in
        yes) DoingMkWorld='mkworld'
             ;;
        no)  DoingMkWorld=''
             ;;
        *)   echo "I don't understand this option: --enable-mkworld=$enableval"
             exit 1
             ;;
    esac
fi

if test "xxx$DoingMkWorld" = 'xxxmkworld' -a \( ! -d mkworld \) ; then
    DoingMkWorld=''
    echo 'Doing --disable-mkworld, as there is no mkworld directory'
fi

# Check whether --enable-glafp-utils or --disable-glafp-utils was given.
if test "${enable_glafp_utils+set}" = set; then
  enableval="$enable_glafp_utils"
  case "$enableval" in
        yes) DoingGlaFpUtils='glafp-utils'
             ;;
        no)  DoingGlaFpUtils=''
             ;;
        *)   echo "I don't understand this option: --enable-glafp-utils=$enableval"
             exit 1
             ;;
    esac
fi

if test "xxx$DoingGlaFpUtils" = 'xxxglafp-utils' -a \( ! -d glafp-utils \) ; then
    DoingGlaFpUtils=''
    echo 'Doing --disable-glafp-utils, as there is no glafp-utils directory'
fi










# -------------------------------------------------------------------------
# Guess host/target/build platform(s) if necessary.
# Partly stolen from GCC "configure".
#
if test "x$target" = xNONE ; then
    if test "x$nonopt" != xNONE ; then
        target=$nonopt
    else
        # This way of testing the result of a command substitution is
        # defined by Posix.2 (section 3.9.1) as well as traditional shells.
        if target=`$srcdir/config.guess` ; then
            echo "Configuring for a ${target} host." 1>&2
        else
            echo 'Config.guess failed to determine the host type.  You need \
to specify one.' 1>&2
            if test -r config.status ; then
                tail +2 config.status 1>&2
            fi
            exit 1
        fi
    fi
fi

# "$host" defaults to "$target"
if test "x$host" = xNONE ; then
    host=$target
fi
# "$build" defaults to "$host"
if test "x$build" = xNONE ; then
    build=$host
else
    echo "This configuration does not support the \`--build' option."
    exit 1
fi

# Canonicali[sz]e those babies
BuildPlatform=`/bin/sh $srcdir/config.sub $build` || exit 1
HostPlatform=`/bin/sh $srcdir/config.sub $host` || exit 1
TargetPlatform=`/bin/sh $srcdir/config.sub $target` || exit 1

if test x"$TargetPlatform" != x"$HostPlatform" ; then
    echo "GHC configuration does not support differing host/target (i.e., cross-compiling)"
    exit 1
fi

# The following will be more difficult when we *are* cross-compiling.
# Suitable names to slam in *_CPP are in platform.h.in.
# We also record the architecture, vendor, and operating system (OS)
# separately.
case $HostPlatform in
alpha-dec-osf[1234]*)
	HostPlatform=alpha-dec-osf1 # canonicalise for our purposes
	TargetPlatform=alpha-dec-osf1 # this will work for now... (hack)
	BuildPlatform=alpha-dec-osf1 #hack
        HostPlatform_CPP='alpha_dec_osf1'
        HostArch_CPP='alpha'
        HostVendor_CPP='dec'
        HostOS_CPP='osf1'
        ;;
hppa1.1-hp-hpux*)
	HostPlatform=hppa1.1-hp-hpux # canonicalise for our purposes (hack)
	TargetPlatform=hppa1.1-hp-hpux
	BuildPlatform=hppa1.1-hp-hpux
        HostPlatform_CPP='hppa1_1_hp_hpux'
        HostArch_CPP='hppa1_1'
        HostVendor_CPP='hp'
        HostOS_CPP='hpux'
        ;;
i[3456]86-*-linuxaout*)
	HostPlatform=i386-unknown-linuxaout # hack again
	TargetPlatform=i386-unknown-linuxaout
	BuildPlatform=i386-unknown-linuxaout
        HostPlatform_CPP='i386_unknown_linuxaout'
        HostArch_CPP='i386'
        HostVendor_CPP='unknown'
        HostOS_CPP='linuxaout'
        ;;
i[3456]86-*-linux*)
	HostPlatform=i386-unknown-linux # hack again
	TargetPlatform=i386-unknown-linux
	BuildPlatform=i386-unknown-linux
        HostPlatform_CPP='i386_unknown_linux'
        HostArch_CPP='i386'
        HostVendor_CPP='unknown'
        HostOS_CPP='linux'
        ;;
i[3456]86-*-freebsd*)
	HostPlatform=i386-unknown-freebsd # hack again
	TargetPlatform=i386-unknown-freebsd
	BuildPlatform=i386-unknown-freebsd
        HostPlatform_CPP='i386_unknown_freebsd'
        HostArch_CPP='i386'
        HostVendor_CPP='unknown'
        HostOS_CPP='freebsd'
        ;;
i[3456]86-*-netbsd*)
	HostPlatform=i386-unknown-netbsd # hack again
	TargetPlatform=i386-unknown-netbsd
	BuildPlatform=i386-unknown-netbsd
        HostPlatform_CPP='i386_unknown_netbsd'
        HostArch_CPP='i386'
        HostVendor_CPP='unknown'
        HostOS_CPP='netbsd'
        ;;
i[3456]86-*-solaris2*)
	HostPlatform=i386-unknown-solaris2 # hack again
	TargetPlatform=i386-unknown-solaris2
	BuildPlatform=i386-unknown-solaris2
        HostPlatform_CPP='i386_unknown_solaris2'
        HostArch_CPP='i386'
        HostVendor_CPP='unknown'
        HostOS_CPP='solaris2'
        ;;
m68k-next-nextstep2)
        HostPlatform_CPP='m68k_next_nextstep2'
        HostArch_CPP='m68k'
        HostVendor_CPP='next'
        HostOS_CPP='nextstep2'
        ;;
m68k-next-nextstep3)
        HostPlatform_CPP='m68k_next_nextstep3'
        HostArch_CPP='m68k'
        HostVendor_CPP='next'
        HostOS_CPP='nextstep3'
        ;;
i[3456]86-next-nextstep3)
	HostPlatform=i386-next-nextstep3 # hack again
	TargetPlatform=i386-next-nextstep3
	BuildPlatform=i386-next-nextstep3
        HostPlatform_CPP='i386_next_nextstep3'
        HostArch_CPP='i386'
        HostVendor_CPP='next'
        HostOS_CPP='nextstep3'
        ;;
m68k-sun-sunos4*)
	HostPlatform=m68k-sun-sunos4
	TargetPlatform=m68k-sun-sunos4 #hack
	BuildPlatform=m68k-sun-sunos4 #hack
        HostPlatform_CPP='m68k_sun_sunos4'
        HostArch_CPP='m68k'
        HostVendor_CPP='sun'
        HostOS_CPP='sunos4'
        ;;
mips-dec-ultrix*)
        HostPlatform_CPP='mips_dec_ultrix'
        HostArch_CPP='mipsel'   # NB a little different
        HostVendor_CPP='dec'
        HostOS_CPP='ultrix'
        ;;
mips-sgi-irix*)
	HostPlatform=mips-sgi-irix
	TargetPlatform=mips-sgi-irix #hack
	BuildPlatform=mips-sgi-irix #hack
        HostPlatform_CPP='mips_sgi_irix'
        HostArch_CPP='mipseb'   # NB a little different
        HostVendor_CPP='sgi'
        HostOS_CPP='irix'
        ;;
powerpc-ibm-aix*)
	HostPlatform=powerpc-ibm-aix
	TargetPlatform=powerpc-ibm-aix #hack
	BuildPlatform=powerpc-ibm-aix #hack
        HostPlatform_CPP='powerpc_ibm_aix'
        HostArch_CPP='powerpc'
        HostVendor_CPP='ibm'
        HostOS_CPP='aix'
        ;;
sparc-sun-sunos4*)
	HostPlatform=sparc-sun-sunos4
	TargetPlatform=sparc-sun-sunos4 #hack
	BuildPlatform=sparc-sun-sunos4 #hack
        HostPlatform_CPP='sparc_sun_sunos4'
        HostArch_CPP='sparc'
        HostVendor_CPP='sun'
        HostOS_CPP='sunos4'
        ;;
sparc-sun-solaris2*)
	HostPlatform=sparc-sun-solaris2
	TargetPlatform=sparc-sun-solaris2 #hack
	BuildPlatform=sparc-sun-solaris2 #hack
        HostPlatform_CPP='sparc_sun_solaris2'
        HostArch_CPP='sparc'
        HostVendor_CPP='sun'
        HostOS_CPP='solaris2'
        ;;
*)
        echo "Unrecognised platform: $HostPlatform"
        exit 1
        ;;
esac

test -n "$verbose" && echo "Host platform set to $HostPlatform"
test -n "$verbose" -a x"$HostPlatform" != x"$TargetPlatform" \
        && echo "Target platform set to $TargetPlatform"
test -n "$verbose" -a x"$BuildPlatform" != x"$HostPlatform" \
        && echo "Build platform set to $BuildPlatform"

BuildPlatform_CPP=$HostPlatform_CPP
TargetPlatform_CPP=$HostPlatform_CPP
BuildArch_CPP=$HostArch_CPP
TargetArch_CPP=$HostArch_CPP
BuildOS_CPP=$HostOS_CPP
TargetOS_CPP=$HostOS_CPP
BuildVendor_CPP=$HostVendor_CPP
TargetVendor_CPP=$HostVendor_CPP






# -------------------------------------------------------------------------
#
#
if test -d /local/fp -a -d /users/fp/simonpj; then
    echo "Brilliant!  You must be a Glaswegian."
    AT_GLASGOW=1
    if test "x$prefix" = xNONE; then
        prefix=/local/fp
        echo "Assuming installation prefix of $prefix"
    fi
    if test "x$exec_prefix" = xNONE; then
        # Sigh: the defn of exec_prefix does not include the bin* bit...
        # WDP 94/07
        exec_prefix=/local/fp
        echo "Assuming binary installation prefix of $exec_prefix"
    fi
else
    AT_GLASGOW=0
fi

test -n "$verbose" && echo "    setting AT_GLASGOW to $AT_GLASGOW"
#
#
#
#
# Pull the hash mark out of the macro call to avoid m4 problems.
ac_msg="whether #! works in shell scripts"
echo $ac_n "checking $ac_msg""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_sys_interpreter'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo '#! /bin/cat
exit 69
' > conftest
chmod u+x conftest
(SHELL=/bin/sh; export SHELL; ./conftest >/dev/null)
if test $? -ne 69; then
   ac_cv_sys_interpreter=yes
else
   ac_cv_sys_interpreter=no
fi
rm -f conftest
fi

echo "$ac_t""$ac_cv_sys_interpreter" 1>&6

#
#
# Extract the first word of "perl", so it can be a program name with args.
set dummy perl; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_PerlCmd'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$PerlCmd"; then
  ac_cv_prog_PerlCmd="$PerlCmd" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_PerlCmd="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
PerlCmd="$ac_cv_prog_PerlCmd"
if test -n "$PerlCmd"; then
  echo "$ac_t""$PerlCmd" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$PerlCmd"; then
    echo "You must install perl before you can continue"
    echo "Perhaps it is already installed, but not in your PATH?"
    exit 1
else
    $PerlCmd -v >conftest.out 2>&1
    if egrep "version 4" conftest.out >/dev/null 2>&1; then
        if egrep "Patch level: 35" conftest.out >/dev/null 2>&1; then
            echo "
************************************************************************
Uh-oh...looks like you have Perl 4.035.

Perl version 4.035 has a bug to do with recursion that will bite if
you run the lit2texi script, when making Info files from
literate files of various sorts.  Either use the current version
(4.036), an older version (e.g., perl 4.019) or apply the patch in
glafp-utils/perl-4.035-fixes to your 4.035 perl.
************************************************************************
"
        fi
    else
	if egrep "version 5" conftest.out >/dev/null 2>&1; then
	    :
	else
	    echo "I'm not sure if your version of perl will work,"
	    echo "but it's worth a shot, eh?"
	fi
    fi
    rm -fr conftest*
fi
#
echo "checking if \`#!$PerlCmd' works in shell scripts"
echo "#!$PerlCmd"'
exit $1;
' > conftest
chmod u+x conftest
(SHELL=/bin/sh; export SHELL; ./conftest 69 > /dev/null)
if test $? -ne 69; then
   echo "It does!"
else
   echo "It doesn't!  Perhaps \`#!$PerlCmd' is too long (often 32 characters max)"
   exit 1
fi
rm -f conftest
#
# (by seeing if a "do 'getopts.pl'" works...
if $PerlCmd -e 'do "getopts.pl" || exit(1); exit(0);' > /dev/null 2>&1 ; then
    :
else
    echo "I think your perl library is misinstalled."
    echo "The following script did not work:"
    echo '      do "getopts.pl" || exit(1); exit(0);'
    exit 1
fi
#
#
# Figure out which C compiler to use.  Gcc is preferred.
# If gcc, make sure it's at least 2.1
#
# Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  ac_prog_rejected=no
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1408: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6
if test $ac_cv_prog_gcc = yes; then
  GCC=yes
  if test "${CFLAGS+set}" != set; then
    echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_gcc_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_gcc_g=yes
else
  ac_cv_prog_gcc_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_gcc_g" 1>&6
    if test $ac_cv_prog_gcc_g = yes; then
      CFLAGS="-g -O"
    else
      CFLAGS="-O"
    fi
  fi
else
  GCC=
  test "${CFLAGS+set}" = set || CFLAGS="-g"
fi

if test -z "$GCC"; then
    echo "You would be better off with gcc"
    echo "Perhaps it is already installed, but not in your PATH?"
    HaveGcc='NO'
else
    gcc -v > conftest.out 2>&1
    echo '/version (\d+)\.(\d+)/ && $1*10+$2 > 20 && print "YES";' > conftest.pl
    HaveGcc=`eval $PerlCmd -n conftest.pl conftest.out`
    if test -z "$HaveGcc"; then
        echo "I'm not sure if your version of gcc will work,"
        echo "but it's worth a shot, eh?"
        HaveGcc='YES'
    fi
    rm -fr conftest*
fi

# If we cannot run a trivial program, we must be cross compiling.
echo $ac_n "checking whether cross-compiling""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_c_cross'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_c_cross=yes
else
cat > conftest.$ac_ext <<EOF
#line 1470 "configure"
#include "confdefs.h"
main(){return(0);}
EOF
{ (eval echo configure:1474: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }
if test -s conftest && (./conftest; exit) 2>/dev/null; then
  ac_cv_c_cross=no
else
  ac_cv_c_cross=yes
fi
fi
rm -fr conftest*
fi

echo "$ac_t""$ac_cv_c_cross" 1>&6
cross_compiling=$ac_cv_c_cross

#
# (NB: NeXTStep thinks diff'ing a file against itself is "trouble")
#
echo foo > conftest1
echo foo > conftest2
if diff -C 1 conftest1 conftest2 > /dev/null 2>&1 ; then
    ContextDiffCmd='diff -C 1'
else
    if diff -c1 conftest1 conftest2 > /dev/null 2>&1 ; then
        ContextDiffCmd='diff -c1'
    else
        echo "Can't figure out how to do context diffs."
        echo "Neither \`diff -C 1' nor \`diff -c1' works."
        exit 1
    fi
fi
rm -f conftest1 conftest2

#
#
#
# Extract the first word of "bison", so it can be a program name with args.
set dummy bison; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_YaccCmd'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$YaccCmd"; then
  ac_cv_prog_YaccCmd="$YaccCmd" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_YaccCmd="bison -y"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
YaccCmd="$ac_cv_prog_YaccCmd"
if test -n "$YaccCmd"; then
  echo "$ac_t""$YaccCmd" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$YaccCmd"; then
    echo "Can't find bison out there..."
    # Extract the first word of "what", so it can be a program name with args.
set dummy what; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_WhatCmd'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$WhatCmd"; then
  ac_cv_prog_WhatCmd="$WhatCmd" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_WhatCmd="what"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_WhatCmd" && ac_cv_prog_WhatCmd=":"
fi
fi
WhatCmd="$ac_cv_prog_WhatCmd"
if test -n "$WhatCmd"; then
  echo "$ac_t""$WhatCmd" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

    # Extract the first word of "yacc", so it can be a program name with args.
set dummy yacc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_YaccCmd'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$YaccCmd"; then
  ac_cv_prog_YaccCmd="$YaccCmd" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_YaccCmd="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
YaccCmd="$ac_cv_prog_YaccCmd"
if test -n "$YaccCmd"; then
  echo "$ac_t""$YaccCmd" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

    if test -z "$YaccCmd"; then
        echo "But that's okay...I can't find yacc either."
        YaccCmd=:
    else
        $WhatCmd $YaccCmd > conftest.out
        if egrep 'y1\.c 1\..*SMI' conftest.out >/dev/null 2>&1; then
            echo "I don't trust your $YaccCmd; it looks like an old Sun yacc"
            if test -x /usr/lang/yacc; then
                echo "I'm going to use /usr/lang/yacc instead"
                YaccCmd=/usr/lang/yacc
            else
                echo "I'm assuming the worst...no parser generator at all"
                YaccCmd=:
            fi
        elif egrep 'y1\.c.*Revision: 4\.2\.6\.3.*DEC' conftest.out >/dev/null 2>&1; then
            echo "I don't trust your $YaccCmd; it looks like a lame DEC yacc"
            echo "I'm assuming the worst...no parser generator at all"
            YaccCmd=:
        else
            echo "But that's okay...as far as I know, your yacc will work."
        fi
        rm -fr conftest*
    fi
fi

#
# Extract the first word of "flex", so it can be a program name with args.
set dummy flex; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_LEX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$LEX"; then
  ac_cv_prog_LEX="$LEX" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_LEX="flex"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_LEX" && ac_cv_prog_LEX="lex"
fi
fi
LEX="$ac_cv_prog_LEX"
if test -n "$LEX"; then
  echo "$ac_t""$LEX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$LEXLIB"
then
  case "$LEX" in
  flex*) ac_lib=fl ;;
  *) ac_lib=l ;;
  esac
  echo $ac_n "checking for -l$ac_lib""... $ac_c" 1>&6
ac_lib_var=`echo $ac_lib_yywrap | tr '.-/+' '___p'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$ac_lib  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 1660 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
char yywrap();

int main() { return 0; }
int t() {
yywrap()
; return 0; }
EOF
if { (eval echo configure:1670: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LEXLIB="-l$ac_lib"
else
  echo "$ac_t""no" 1>&6
fi

fi


#--------------------------------------------------------------
WithHc='haskell-compiler-unspecified'
WithHcType='HC_UNSPECIFIED'

# Check whether --with-hc or --without-hc was given.
if test "${with_hc+set}" = set; then
  withval="$with_hc"
  case "$withval" in
        ghc* | glhc* )
                WithHc=$withval
                ;;
        hbc* )  WithHc=$withval
                ;;
        nhc* )  WithHc=$withval
                ;;
        c | C)  WithHc='C'
                ;;
        in-place )
                WithHc='IN-PLACE'
                ;;
        *)      echo "I don't understand this option: --with-hc=$withval"
                exit 1
                ;;
    esac
fi


# make sure that what they said makes sense.... set WithHcType
case $WithHc in
    haskell-compiler-unspecified ) # maybe they will say something later...
	    ;;
    ghc* | glhc* )
	    WithHcType='HC_GLASGOW_GHC'
            # Extract the first word of "$WithHc", so it can be a program name with args.
set dummy $WithHc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_have_ghc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$have_ghc"; then
  ac_cv_prog_have_ghc="$have_ghc" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_have_ghc="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
have_ghc="$ac_cv_prog_have_ghc"
if test -n "$have_ghc"; then
  echo "$ac_t""$have_ghc" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

            if test -z "$have_ghc"; then
                echo "Can't find Glasgow Haskell to compile with: $WithHc"
		exit 1
            fi
            ;;
    hbc* )  # Look for the dastardly competition
	    WithHcType='HC_CHALMERS_HBC'
            # Extract the first word of "$WithHc", so it can be a program name with args.
set dummy $WithHc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_have_hbc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$have_hbc"; then
  ac_cv_prog_have_hbc="$have_hbc" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_have_hbc="YES"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_have_hbc" && ac_cv_prog_have_hbc="NO"
fi
fi
have_hbc="$ac_cv_prog_have_hbc"
if test -n "$have_hbc"; then
  echo "$ac_t""$have_hbc" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

            if test $have_hbc = 'NO' ; then
                echo "Can't find Chalmers HBC to compile with: $WithHc"
                exit 1
            fi
            ;;
    nhc* )  # Look for Niklas Rojemo's "nhc"
	    WithHcType='HC_ROJEMO_NHC'
            # Extract the first word of "$WithHc", so it can be a program name with args.
set dummy $WithHc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_have_nhc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$have_nhc"; then
  ac_cv_prog_have_nhc="$have_nhc" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_have_nhc="YES"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_have_nhc" && ac_cv_prog_have_nhc="NO"
fi
fi
have_nhc="$ac_cv_prog_have_nhc"
if test -n "$have_nhc"; then
  echo "$ac_t""$have_nhc" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

            if test $have_nhc = 'NO' ; then
                echo "Can't find Niklas Rojemo's NHC to compile with: $WithHc"
                exit 1
            fi
            ;;
    c | C)  WithHcType='HC_USE_HC_FILES'
            ;;
    IN-PLACE) WithHcType='HC_GLASGOW_GHC'
	    ;;
esac



WhatGccIsCalled=gcc
# Check whether --with-gcc or --without-gcc was given.
if test "${with_gcc+set}" = set; then
  withval="$with_gcc"
  HaveGcc=YES; WhatGccIsCalled="$withval"
fi



MakeCmd='make -r'
# Check whether --with-make or --without-make was given.
if test "${with_make+set}" = set; then
  withval="$with_make"
  MakeCmd="$withval"
fi
 


# let the user decide where the best tmpdir is
# /tmp is the default; /usr/tmp is sometimes a good choice.
# Very site-specific.
TmpDir='/tmp'
# Check whether --with-tmpdir or --without-tmpdir was given.
if test "${with_tmpdir+set}" = set; then
  withval="$with_tmpdir"
  TmpDir="$withval"
fi



# let the user specify a maximum heap to be used; the old
# "I have a 64MB machine, why not use a 32MB heap?" thing.
HcMaxHeapWasSet='NO'
HcMaxHeap='0'
# Check whether --with-max-heap or --without-max-heap was given.
if test "${with_max_heap+set}" = set; then
  withval="$with_max_heap"
  HcMaxHeapWasSet='YES'
    HcMaxHeap="$withval"
fi




MkDependHSCmd='mkdependHS'
if test -f ./ghc/utils/mkdependHS/mkdependHS \
     -o -f ./ghc/utils/mkdependHS/mkdependHS.prl ; then
    MkDependHSCmd='TopDirPwd/ghc/utils/mkdependHS/mkdependHS'
fi
# Check whether --with-mkdependHS or --without-mkdependHS was given.
if test "${with_mkdependHS+set}" = set; then
  withval="$with_mkdependHS"
  MkDependHSCmd="$withval"
fi



# -------------------------------------------------------------------------
#
#
echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
# On Suns, sometimes $CPP names a directory.
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -z "$CPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    # This must be in double quotes, not single quotes, because CPP may get
  # substituted into the Makefile and "${CC-cc}" will confuse make.
  CPP="${CC-cc} -E"
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp.
  cat > conftest.$ac_ext <<EOF
#line 1909 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:1915: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  rm -rf conftest*
  CPP="${CC-cc} -E -traditional-cpp"
  cat > conftest.$ac_ext <<EOF
#line 1924 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:1930: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  rm -rf conftest*
  CPP=/lib/cpp
fi
rm -f conftest*
fi
rm -f conftest*
  ac_cv_prog_CPP="$CPP"
fi
  CPP="$ac_cv_prog_CPP"
else
  ac_cv_prog_CPP="$CPP"
fi
echo "$ac_t""$CPP" 1>&6

if echo $CPP | egrep gcc >/dev/null 2>&1; then
    echo > conftest.c
    gcc -v -E conftest.c >/dev/null 2>conftest.out
    echo '/(\S+\/cpp)/ && print "$1";' > conftest.pl
    GNUCPP="`eval $PerlCmd -n conftest.pl conftest.out`"
    test -n "$verbose" && echo "        setting GNUCPP to $GNUCPP"
    RAWCPP="`eval $PerlCmd -n conftest.pl conftest.out` -traditional"
    test -n "$verbose" && echo "        setting RAWCPP to $RAWCPP"
    rm -fr conftest*
fi
# ToDo: what are GNUCPP and RAWCPP if the above if didn't fire? WDP 95/02


#
#
ac_aux_dir=
for ac_dir in $srcdir $srcdir/.. $srcdir/../..; do
  if test -f $ac_dir/install-sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install-sh -c"
    break
  elif test -f $ac_dir/install.sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install.sh -c"
    break
  fi
done
if test -z "$ac_aux_dir"; then
  { echo "configure: error: can not find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." 1>&2; exit 1; }
fi
ac_config_guess=$ac_aux_dir/config.guess
ac_config_sub=$ac_aux_dir/config.sub
ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.

# Find a good install program.  We prefer a C program (faster),
# so one script is as good as another.  But avoid the broken or
# incompatible versions:
# SysV /etc/install, /usr/sbin/install
# SunOS /usr/etc/install
# IRIX /sbin/install
# AIX /bin/install
# AFS /usr/afsws/bin/install, which mishandles nonexistent args
# SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
# ./install, which can be erroneously created by make from ./install.sh.
echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
if test -z "$INSTALL"; then
if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    # Account for people who put trailing slashes in PATH elements.
    case "$ac_dir/" in
    /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;
    *)
      # OSF1 and SCO ODT 3.0 have their own names for install.
      for ac_prog in ginstall installbsd scoinst install; do
        if test -f $ac_dir/$ac_prog; then
	  if test $ac_prog = install &&
            grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
	    # AIX install.  It has an incompatible calling convention.
	    # OSF/1 installbsd also uses dspmsg, but is usable.
	    :
	  else
	    ac_cv_path_install="$ac_dir/$ac_prog -c"
	    break 2
	  fi
	fi
      done
      ;;
    esac
  done
  IFS="$ac_save_ifs"

fi
  if test "${ac_cv_path_install+set}" = set; then
    INSTALL="$ac_cv_path_install"
  else
    # As a last resort, use the slow shell script.  We don't cache a
    # path for INSTALL within a source directory, because that will
    # break other packages using the cache if that directory is
    # removed, or if the path is relative.
    INSTALL="$ac_install_sh"
  fi
fi
echo "$ac_t""$INSTALL" 1>&6

# Use test -z because SunOS4 sh mishandles braces in ${var-val}.
# It thinks the first close brace ends the variable substitution.
test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'

test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'

#
#
# Extract the first word of "ar", so it can be a program name with args.
set dummy ar; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_ArCmd'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$ArCmd"; then
  ac_cv_prog_ArCmd="$ArCmd" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_ArCmd="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
ArCmd="$ac_cv_prog_ArCmd"
if test -n "$ArCmd"; then
  echo "$ac_t""$ArCmd" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$ArCmd"; then
    echo "You don't seem to have ar...I have no idea how to make a library"
    exit 1;
fi
if $ArCmd clqs conftest.a >/dev/null 2>/dev/null; then
    ArCmd="$ArCmd clqs"
    NeedRanLib=''
elif $ArCmd cqs conftest.a >/dev/null 2>/dev/null; then
    ArCmd="$ArCmd cqs"
    NeedRanLib=''
elif $ArCmd clq conftest.a >/dev/null 2>/dev/null; then
    ArCmd="$ArCmd clq"
    NeedRanLib='YES'
elif $ArCmd cq conftest.a >/dev/null 2>/dev/null; then
    ArCmd="$ArCmd cq"
    NeedRanLib='YES'
elif $ArCmd cq conftest.a 2>&1 | grep 'no archive members specified' >/dev/null 2>/dev/null; then
    ArCmd="$ArCmd cq"
    NeedRanLib='YES'
else
    echo "I can't figure out how to use your $ArCmd"
    exit 1
fi
rm -rf conftest*
test -n "$ArCmd" && test -n "$verbose" && echo "        setting ArCmd to $ArCmd"

#
#
if test -z "$NeedRanLib"; then
    # we hackily override a few platforms on a case-by-case basis
    case $HostPlatform in
    i386-*-linuxaout)
	NeedRanLib='YES'
	;;
    *)	RANLIB=':'
	;;
    esac
    test -n "$verbose" && echo "        setting RANLIB to $RANLIB"
fi
if test -n "$NeedRanLib"; then
    # Extract the first word of "ranlib", so it can be a program name with args.
set dummy ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
fi
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

fi

#
#
echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 2149 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2157: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 2172 "configure"
#include "confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 2190 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
if test "$cross_compiling" = yes; then
  :
else
cat > conftest.$ac_ext <<EOF
#line 2211 "configure"
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
{ (eval echo configure:2222: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }
if test -s conftest && (./conftest; exit) 2>/dev/null; then
  :
else
  ac_cv_header_stdc=no
fi
fi
rm -fr conftest*
fi
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF

fi

#
#
for ac_hdr in dirent.h fcntl.h grp.h malloc.h memory.h nlist.h pwd.h siginfo.h signal.h stdlib.h string.h sys/fault.h sys/file.h sys/mman.h sys/param.h sys/procfs.h sys/resource.h sys/signal.h sys/socket.h sys/stat.h sys/syscall.h sys/time.h sys/timeb.h sys/timers.h sys/times.h sys/types.h sys/utsname.h sys/vadvise.h sys/wait.h termios.h time.h types.h unistd.h utime.h vfork.h 
do
ac_safe=`echo "$ac_hdr" | tr './\055' '___'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 2251 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2256: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | tr 'abcdefghijklmnopqrstuvwxyz./\055' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ___'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

#
#
echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 2287 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/time.h>
#include <time.h>
int main() { return 0; }
int t() {
struct tm *tp;
; return 0; }
EOF
if { (eval echo configure:2297: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_header_time=yes
else
  rm -rf conftest*
  ac_cv_header_time=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_header_time" 1>&6
if test $ac_cv_header_time = yes; then
  cat >> confdefs.h <<\EOF
#define TIME_WITH_SYS_TIME 1
EOF

fi

#
#
echo $ac_n "checking whether struct tm is in sys/time.h or time.h""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_struct_tm'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 2323 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <time.h>
int main() { return 0; }
int t() {
struct tm *tp; tp->tm_sec;
; return 0; }
EOF
if { (eval echo configure:2332: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm=time.h
else
  rm -rf conftest*
  ac_cv_struct_tm=sys/time.h
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_struct_tm" 1>&6
if test $ac_cv_struct_tm = sys/time.h; then
  cat >> confdefs.h <<\EOF
#define TM_IN_SYS_TIME 1
EOF

fi

echo $ac_n "checking for tm_zone in struct tm""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_struct_tm_zone'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 2356 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <$ac_cv_struct_tm>
int main() { return 0; }
int t() {
struct tm tm; tm.tm_zone;
; return 0; }
EOF
if { (eval echo configure:2365: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm_zone=yes
else
  rm -rf conftest*
  ac_cv_struct_tm_zone=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_struct_tm_zone" 1>&6
if test "$ac_cv_struct_tm_zone" = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_TM_ZONE 1
EOF

else
  echo $ac_n "checking for tzname""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_var_tzname'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 2388 "configure"
#include "confdefs.h"
#include <time.h>
#ifndef tzname /* For SGI.  */
extern char *tzname[]; /* RS6000 and others reject char **tzname.  */
#endif
int main() { return 0; }
int t() {
atoi(*tzname);
; return 0; }
EOF
if { (eval echo configure:2399: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf conftest*
  ac_cv_var_tzname=yes
else
  rm -rf conftest*
  ac_cv_var_tzname=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_var_tzname" 1>&6
  if test $ac_cv_var_tzname = yes; then
    cat >> confdefs.h <<\EOF
#define HAVE_TZNAME 1
EOF

  fi
fi

# 
#
echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 2426 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <signal.h>
#ifdef signal
#undef signal
#endif
#ifdef __cplusplus
extern "C" void (*signal (int, void (*)(int)))(int);
#else
void (*signal ()) ();
#endif

int main() { return 0; }
int t() {
int i;
; return 0; }
EOF
if { (eval echo configure:2444: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_type_signal=void
else
  rm -rf conftest*
  ac_cv_type_signal=int
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_type_signal" 1>&6
cat >> confdefs.h <<EOF
#define RETSIGTYPE $ac_cv_type_signal
EOF


#
#
for ac_func in access ftime getclock getpagesize getrusage gettimeofday mktime mprotect setitimer stat sysconf timelocal times vadvise vfork
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 2470 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
char $ac_func();

int main() { return 0; }
int t() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:2492: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

fi
if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

#
#
# The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
# for constant arguments.  Useless!
echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 2523 "configure"
#include "confdefs.h"
#include <alloca.h>
int main() { return 0; }
int t() {
char *p = alloca(2 * sizeof(int));
; return 0; }
EOF
if { (eval echo configure:2531: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf conftest*
  ac_cv_header_alloca_h=yes
else
  rm -rf conftest*
  ac_cv_header_alloca_h=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
if test $ac_cv_header_alloca_h = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA_H 1
EOF

fi

echo $ac_n "checking for alloca""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_alloca'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 2555 "configure"
#include "confdefs.h"

#ifdef __GNUC__
# define alloca __builtin_alloca
#else
# if HAVE_ALLOCA_H
#  include <alloca.h>
# else
#  ifdef _AIX
 #pragma alloca
#  else
#   ifndef alloca /* predefined by HP cc +Olibcalls */
char *alloca ();
#   endif
#  endif
# endif
#endif

int main() { return 0; }
int t() {
char *p = (char *) alloca(1);
; return 0; }
EOF
if { (eval echo configure:2579: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf conftest*
  ac_cv_func_alloca=yes
else
  rm -rf conftest*
  ac_cv_func_alloca=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_func_alloca" 1>&6
if test $ac_cv_func_alloca = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA 1
EOF

fi

if test $ac_cv_func_alloca = no; then
  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
  # that cause trouble.  Some versions do not even contain alloca or
  # contain a buggy version.  If you still want to use their alloca,
  # use ar to extract alloca.o from them instead of compiling alloca.c.
  ALLOCA=alloca.o
  cat >> confdefs.h <<\EOF
#define C_ALLOCA 1
EOF


echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 2614 "configure"
#include "confdefs.h"
#if defined(CRAY) && ! defined(CRAY2)
webecray
#else
wenotbecray
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "webecray" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_os_cray=yes
else
  rm -rf conftest*
  ac_cv_os_cray=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_os_cray" 1>&6
if test $ac_cv_os_cray = yes; then
for ac_func in _getb67 GETB67 getb67; do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 2643 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
char $ac_func();

int main() { return 0; }
int t() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:2665: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

fi
if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<EOF
#define CRAY_STACKSEG_END $ac_func
EOF

  break
else
  echo "$ac_t""no" 1>&6
fi

done
fi

echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_c_stack_direction=0
else
cat > conftest.$ac_ext <<EOF
#line 2697 "configure"
#include "confdefs.h"
find_stack_direction ()
{
  static char *addr = 0;
  auto char dummy;
  if (addr == 0)
    {
      addr = &dummy;
      return find_stack_direction ();
    }
  else
    return (&dummy > addr) ? 1 : -1;
}
main ()
{
  exit (find_stack_direction() < 0);
}
EOF
{ (eval echo configure:2716: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }
if test -s conftest && (./conftest; exit) 2>/dev/null; then
  ac_cv_c_stack_direction=1
else
  ac_cv_c_stack_direction=-1
fi
fi
rm -fr conftest*
fi

echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
cat >> confdefs.h <<EOF
#define STACK_DIRECTION $ac_cv_c_stack_direction
EOF

fi

#
#
echo $ac_n "checking for working const""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 2740 "configure"
#include "confdefs.h"

int main() { return 0; }
int t() {

/* Ultrix mips cc rejects this.  */
typedef int charset[2]; const charset x;
/* SunOS 4.1.1 cc rejects this.  */
char const *const *ccp;
char **p;
/* NEC SVR4.0.2 mips cc rejects this.  */
struct point {int x, y;};
static struct point const zero = {0,0};
/* AIX XL C 1.02.0.0 rejects this.
   It does not let you subtract one const X* pointer from another in an arm
   of an if-expression whose if-part is not a constant expression */
const char *g = "string";
ccp = &g + (g ? g-g : 0);
/* HPUX 7.0 cc rejects these. */
++ccp;
p = (char**) ccp;
ccp = (char const *const *) p;
{ /* SCO 3.2v4 cc rejects this.  */
  char *t;
  char const *s = 0 ? (char *) 0 : (char const *) 0;

  *t++ = 0;
}
{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
  int x[] = {25, 17};
  const int *foo = &x[0];
  ++foo;
}
{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
  typedef const int *iptr;
  iptr p = 0;
  ++p;
}
{ /* AIX XL C 1.02.0.0 rejects this saying
     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
  struct s { int j; const int *ap[3]; };
  struct s *b; b->j = 5;
}
{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
  const int foo = 10;
}

; return 0; }
EOF
if { (eval echo configure:2790: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_const=yes
else
  rm -rf conftest*
  ac_cv_c_const=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_c_const" 1>&6
if test $ac_cv_c_const = no; then
  cat >> confdefs.h <<\EOF
#define const 
EOF

fi

#
# We assume that they _aren't_ there if anything goes wrong.
#
echo checking for a leading underscore in symbol names
if test "$cross_compiling" = yes; then
  LeadingUnderscore='YES'
else
cat > conftest.$ac_ext <<EOF
#line 2817 "configure"
#include "confdefs.h"
#ifdef HAVE_NLIST_H
#include <nlist.h>
struct nlist xYzzY[] = {{"_xYzzY", 0},{0}};
#endif

main(argc, argv)
int argc;
char **argv;
{
#ifdef HAVE_NLIST_H
    if(nlist(argv[0], xYzzY) == 0 && xYzzY[0].n_value != 0)
        exit(0);
#endif
    exit(1);
}
EOF
{ (eval echo configure:2835: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }
if test -s conftest && (./conftest; exit) 2>/dev/null; then
  LeadingUnderscore='YES'
else
  LeadingUnderscore='NO'
fi
fi
rm -fr conftest*
test -n "$verbose" && echo "    setting LeadingUnderscore to $LeadingUnderscore"

# -------------------------------------------------------------------------

if test "xxx$DoingGHC" = 'xxxghc' ; then
# a very big "if"!
#
# builds: normal = sequential _ap_o ; _p = profiling (sequential);
# _t = ticky; _u = unregisterized
GhcBuild_normal='YES'
GhcBuild_p='YES'
GhcBuild_t='NO'
GhcBuild_u='NO'
# _mc = concurrent; _mr = profiled concurrent; _mt = ticky concurrent
# _mp = parallel; _mg = gransim
GhcBuild_mc='NO'
GhcBuild_mr='NO'
GhcBuild_mt='NO'
GhcBuild_mp='NO'
GhcBuild_mg='NO'
# GC builds: _2s, _1s, _du (, _gn)
GhcBuild_2s='NO'
GhcBuild_1s='NO'
GhcBuild_du='NO'
# user builds: a...o
GhcBuild_a='NO'
GhcBuild_b='NO'
GhcBuild_c='NO'
GhcBuild_d='NO'
GhcBuild_e='NO'
GhcBuild_f='NO'
GhcBuild_g='NO'
GhcBuild_h='NO'
GhcBuild_i='NO'
GhcBuild_j='NO'
GhcBuild_k='NO'
GhcBuild_l='NO'
GhcBuild_m='NO'
GhcBuild_n='NO'
GhcBuild_o='NO'
GhcBuild_A='NO'
GhcBuild_B='NO'
# More could be added here...

# Check whether --enable-normal-build or --disable-normal-build was given.
if test "${enable_normal_build+set}" = set; then
  enableval="$enable_normal_build"
  case "$enableval" in
        yes) GhcBuild_normal='YES'
             ;;
        no)  GhcBuild_normal='NO'
             ;;
        *)   echo "I don't understand this option: --enable-normal-build=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-profiling or --disable-profiling was given.
if test "${enable_profiling+set}" = set; then
  enableval="$enable_profiling"
  case "$enableval" in
        yes) GhcBuild_p='YES'
             ;;
        no)  GhcBuild_p='NO'
             ;;
        *)   echo "I don't understand this option: --enable-profiling=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-ticky or --disable-ticky was given.
if test "${enable_ticky+set}" = set; then
  enableval="$enable_ticky"
  case "$enableval" in
        yes) GhcBuild_t='YES'
             ;;
        no)  GhcBuild_t='NO'
             ;;
        *)   echo "I don't understand this option: --enable-ticky=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-concurrent or --disable-concurrent was given.
if test "${enable_concurrent+set}" = set; then
  enableval="$enable_concurrent"
  case "$enableval" in
        yes) GhcBuild_mc='YES'
             ;;
        no)  GhcBuild_mc='NO'
             ;;
        *)   echo "I don't understand this option: --enable-concurrent=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-profiled-concurrent or --disable-profiled-concurrent was given.
if test "${enable_profiled_concurrent+set}" = set; then
  enableval="$enable_profiled_concurrent"
  case "$enableval" in
        yes) GhcBuild_mr='YES'
             ;;
        no)  GhcBuild_mr='NO'
             ;;
        *)   echo "I don't understand this option: --enable-profiled-concurrent=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-ticky-concurrent or --disable-ticky-concurrent was given.
if test "${enable_ticky_concurrent+set}" = set; then
  enableval="$enable_ticky_concurrent"
  case "$enableval" in
        yes) GhcBuild_mt='YES'
             ;;
        no)  GhcBuild_mt='NO'
             ;;
        *)   echo "I don't understand this option: --enable-ticky-concurrent=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-parallel or --disable-parallel was given.
if test "${enable_parallel+set}" = set; then
  enableval="$enable_parallel"
  case "$enableval" in
        yes) GhcBuild_mp='YES';
             ;;
        no)  GhcBuild_mp='NO'
             ;;
        *)   echo "I don't understand this option: --enable-parallel=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-gransim or --disable-gransim was given.
if test "${enable_gransim+set}" = set; then
  enableval="$enable_gransim"
  case "$enableval" in
        yes) GhcBuild_mg='YES';
             ;;
        no)  GhcBuild_mg='NO'
             ;;
        *)   echo "I don't understand this option: --enable-gransim=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-gc-2s or --disable-gc-2s was given.
if test "${enable_gc_2s+set}" = set; then
  enableval="$enable_gc_2s"
  case "$enableval" in
        yes) GhcBuild_2s='YES'
             ;;
        no)  GhcBuild_2s='NO'
             ;;
        *)   echo "I don't understand this option: --enable-gc-2s=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-gc-1s or --disable-gc-1s was given.
if test "${enable_gc_1s+set}" = set; then
  enableval="$enable_gc_1s"
  case "$enableval" in
        yes) GhcBuild_1s='YES'
             ;;
        no)  GhcBuild_1s='NO'
             ;;
        *)   echo "I don't understand this option: --enable-gc-1s=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-gc-du or --disable-gc-du was given.
if test "${enable_gc_du+set}" = set; then
  enableval="$enable_gc_du"
  case "$enableval" in
        yes) GhcBuild_du='YES'
             ;;
        no)  GhcBuild_du='NO'
             ;;
        *)   echo "I don't understand this option: --enable-gc-du=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-a or --disable-user-way-a was given.
if test "${enable_user_way_a+set}" = set; then
  enableval="$enable_user_way_a"
  case "$enableval" in
        yes) GhcBuild_a='YES'
             ;;
        no)  GhcBuild_a='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-a=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-b or --disable-user-way-b was given.
if test "${enable_user_way_b+set}" = set; then
  enableval="$enable_user_way_b"
  case "$enableval" in
        yes) GhcBuild_b='YES'
             ;;
        no)  GhcBuild_b='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-b=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-c or --disable-user-way-c was given.
if test "${enable_user_way_c+set}" = set; then
  enableval="$enable_user_way_c"
  case "$enableval" in
        yes) GhcBuild_c='YES'
             ;;
        no)  GhcBuild_c='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-c=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-d or --disable-user-way-d was given.
if test "${enable_user_way_d+set}" = set; then
  enableval="$enable_user_way_d"
  case "$enableval" in
        yes) GhcBuild_d='YES'
             ;;
        no)  GhcBuild_d='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-d=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-e or --disable-user-way-e was given.
if test "${enable_user_way_e+set}" = set; then
  enableval="$enable_user_way_e"
  case "$enableval" in
        yes) GhcBuild_e='YES'
             ;;
        no)  GhcBuild_e='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-e=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-f or --disable-user-way-f was given.
if test "${enable_user_way_f+set}" = set; then
  enableval="$enable_user_way_f"
  case "$enableval" in
        yes) GhcBuild_f='YES'
             ;;
        no)  GhcBuild_f='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-f=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-g or --disable-user-way-g was given.
if test "${enable_user_way_g+set}" = set; then
  enableval="$enable_user_way_g"
  case "$enableval" in
        yes) GhcBuild_g='YES'
             ;;
        no)  GhcBuild_g='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-g=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-h or --disable-user-way-h was given.
if test "${enable_user_way_h+set}" = set; then
  enableval="$enable_user_way_h"
  case "$enableval" in
        yes) GhcBuild_h='YES'
             ;;
        no)  GhcBuild_h='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-h=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-i or --disable-user-way-i was given.
if test "${enable_user_way_i+set}" = set; then
  enableval="$enable_user_way_i"
  case "$enableval" in
        yes) GhcBuild_i='YES'
             ;;
        no)  GhcBuild_i='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-i=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-j or --disable-user-way-j was given.
if test "${enable_user_way_j+set}" = set; then
  enableval="$enable_user_way_j"
  case "$enableval" in
        yes) GhcBuild_j='YES'
             ;;
        no)  GhcBuild_j='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-j=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-k or --disable-user-way-k was given.
if test "${enable_user_way_k+set}" = set; then
  enableval="$enable_user_way_k"
  case "$enableval" in
        yes) GhcBuild_k='YES'
             ;;
        no)  GhcBuild_k='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-k=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-l or --disable-user-way-l was given.
if test "${enable_user_way_l+set}" = set; then
  enableval="$enable_user_way_l"
  case "$enableval" in
        yes) GhcBuild_l='YES'
             ;;
        no)  GhcBuild_l='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-l=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-m or --disable-user-way-m was given.
if test "${enable_user_way_m+set}" = set; then
  enableval="$enable_user_way_m"
  case "$enableval" in
        yes) GhcBuild_m='YES'
             ;;
        no)  GhcBuild_m='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-m=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-n or --disable-user-way-n was given.
if test "${enable_user_way_n+set}" = set; then
  enableval="$enable_user_way_n"
  case "$enableval" in
        yes) GhcBuild_n='YES'
             ;;
        no)  GhcBuild_n='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-n=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-o or --disable-user-way-o was given.
if test "${enable_user_way_o+set}" = set; then
  enableval="$enable_user_way_o"
  case "$enableval" in
        yes) GhcBuild_o='YES'
             ;;
        no)  GhcBuild_o='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-o=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-A or --disable-user-way-A was given.
if test "${enable_user_way_A+set}" = set; then
  enableval="$enable_user_way_A"
  case "$enableval" in
        yes) GhcBuild_A='YES'
             ;;
        no)  GhcBuild_A='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-A=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-user-way-B or --disable-user-way-B was given.
if test "${enable_user_way_B+set}" = set; then
  enableval="$enable_user_way_B"
  case "$enableval" in
        yes) GhcBuild_B='YES'
             ;;
        no)  GhcBuild_B='NO'
             ;;
        *)   echo "I don't understand this option: --enable-user-way-B=$enableval"
             exit 1
             ;;
    esac
fi




#---------------------------------------------------------------
#
# Figure out what Haskell compiler(s) to use for booting
#
# first, the defaults...
WithGhcHc='haskell-compiler-unspecified'
WithGhcHcType='HC_UNSPECIFIED'
GhcBuilderVersion='28'

# Check whether --with-hc-for-ghc or --without-hc-for-ghc was given.
if test "${with_hc_for_ghc+set}" = set; then
  withval="$with_hc_for_ghc"
  case "$withval" in
        ghc* | glhc* )
                WithGhcHc=$withval
                ;;
	hbc* )  echo "HBC will not compile GHC 0.26 as is (sigh)"
		exit 1
		;;
        c | C)  WithGhcHc='C'
		WithGhcHcType='HC_USE_HC_FILES'
                ;;
        *)      echo "I don't understand this option: --with-hc-for-ghc=$withval"
                exit 1
                ;;
    esac
fi


# make sure that what they said makes sense.... set WithGhcHcType
case $WithGhcHc in
    haskell-compiler-unspecified ) # maybe they said something earlier...
	    if test $WithHc = 'haskell-compiler-unspecified' ; then
		echo "Neither --with-hc nor --with-hc-for-ghc was properly set"
		exit 1
	    fi
	    if test $WithHcType = 'HC_GLASGOW_GHC' ; then
                touch conftest.o
                $WithHc -v -C conftest.o > conftest.out 2>&1
                echo '/version (\d+)\.(\d+)/ && print ($1*100+$2);' > conftest.pl
                GhcBuilderVersion=`eval $PerlCmd -n conftest.pl conftest.out`
                rm -rf conftest*
	    fi
	    ;;
    ghc* | glhc* )
	    WithGhcHcType='HC_GLASGOW_GHC'
            # Extract the first word of "$WithGhcHc", so it can be a program name with args.
set dummy $WithGhcHc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_have_ghc_ghc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$have_ghc_ghc"; then
  ac_cv_prog_have_ghc_ghc="$have_ghc_ghc" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_have_ghc_ghc="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
have_ghc_ghc="$ac_cv_prog_have_ghc_ghc"
if test -n "$have_ghc_ghc"; then
  echo "$ac_t""$have_ghc_ghc" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

            if test -z "$have_ghc_ghc"; then
                echo "Can't find Glasgow Haskell to compile GHC with: $WithGhcHc"
		exit 1
	    else
                touch conftest.o
                $WithGhcHc -v -C conftest.o > conftest.out 2>&1
                echo '/version (\d+)\.(\d+)/ && print ($1*100+$2);' > conftest.pl
                GhcBuilderVersion=`eval $PerlCmd -n conftest.pl conftest.out`
                rm -rf conftest*
            fi
            ;;
    c | C)  WithGhcHcType='HC_USE_HC_FILES'
            ;;
esac




GhcWithRegisterised='YES'
# Check whether --enable-portable-C or --disable-portable-C was given.
if test "${enable_portable_C+set}" = set; then
  enableval="$enable_portable_C"
  case "$enableval" in
        yes) GhcWithRegisterised='NO'
             ;;
        no)  GhcWithRegisterised='YES'
             ;;
        *)   echo "I don't understand this option: --enable-portable-C=$enableval"
             exit 1
             ;;
    esac
fi


if test $GhcWithRegisterised = 'YES'; then
    case $HostPlatform in
    alpha-* | hppa1.1-* | i386-* | m68k-* | mips-* | powerpc-* | sparc-* )
       ;;
    *)
       echo "Don't know non-portable C tricks for this platform: $HostPlatform"
       GhcWithRegisterised='NO'
       ;;
    esac
fi


if test $GhcWithRegisterised = 'NO'; then
    GhcBuild_u='YES'
    GhcBuild_normal='NO'
    GhcBuild_p='NO'
fi
# ToDo: make sure we can do concurrent for platform/circs...
# ToDo: make sure we can do profiling for platform/circs...
# ToDo: make sure we can do parallel for platform/circs...
# ToDo: make sure we can do gransim for platform/circs...

GhcWithHscBuiltViaC='NO'
# Check whether --enable-hsc-built-via-C or --disable-hsc-built-via-C was given.
if test "${enable_hsc_built_via_C+set}" = set; then
  enableval="$enable_hsc_built_via_C"
  case "$enableval" in
        yes) GhcWithHscBuiltViaC='YES'
             ;;
        no)  GhcWithHscBuiltViaC='NO'
             ;;
        *)   echo "I don't understand this option: --enable-hsc-built-via-C=$enableval"
             exit 1
             ;;
    esac
fi

case $WithGhcHc in
    haskell-compiler-unspecified ) # maybe they said something earlier...
	    if test $WithHcType = 'HC_USE_HC_FILES' ; then
		GhcWithHscBuiltViaC='YES'
	    fi
	    ;;
    c | C)  GhcWithHscBuiltViaC='YES'
            ;;
    *)	    ;;
esac


GhcWithHscOptimised='YES'
# Check whether --enable-hsc-optimised or --disable-hsc-optimised was given.
if test "${enable_hsc_optimised+set}" = set; then
  enableval="$enable_hsc_optimised"
  case "$enableval" in
        yes) GhcWithHscOptimised='YES'
             ;;
        no)  GhcWithHscOptimised='NO'
             ;;
        *)   echo "I don't understand this option: --enable-hsc-optimised=$enableval"
             exit 1
             ;;
    esac
fi



GhcWithHscDebug='NO'
# Check whether --enable-hsc-debug or --disable-hsc-debug was given.
if test "${enable_hsc_debug+set}" = set; then
  enableval="$enable_hsc_debug"
  case "$enableval" in
        yes) GhcWithHscDebug='YES'
             ;;
        no)  GhcWithHscDebug='NO'
             ;;
        *)   echo "I don't understand this option: --enable-hsc-debug=$enableval"
             exit 1
             ;;
    esac
fi



GhcWithNativeCodeGen='YES'
# Check whether --enable-native-code-generator or --disable-native-code-generator was given.
if test "${enable_native_code_generator+set}" = set; then
  enableval="$enable_native_code_generator"
  case "$enableval" in
        yes) GhcWithNativeCodeGen='YES'
             ;;
        no)  GhcWithNativeCodeGen='NO'
             ;;
        *)   echo "I don't understand this option: --enable-native-code-generator=$enableval"
             exit 1
             ;;
    esac
fi

if test $GhcWithNativeCodeGen = 'YES'; then
    case $TargetPlatform in
    i386-* | alpha-* | sparc-* )
       ;;
    *)
       echo "Don't have a native-code generator for this platform: $TargetPlatform"
       GhcWithNativeCodeGen='NO'
       ;;
    esac
fi


GhcWithDeforester='NO'
# Check whether --enable-deforester or --disable-deforester was given.
if test "${enable_deforester+set}" = set; then
  enableval="$enable_deforester"
  case "$enableval" in
        yes) GhcWithDeforester='YES'
             ;;
        no)  GhcWithDeforester='NO'
             ;;
        *)   echo "I don't understand this option: --enable-deforester=$enableval"
             exit 1
             ;;
    esac
fi



GhcWithReadline='NO'
# Check whether --enable-readline-library or --disable-readline-library was given.
if test "${enable_readline_library+set}" = set; then
  enableval="$enable_readline_library"
  case "$enableval" in
        yes) GhcWithReadline='YES'
             ;;
        no)  GhcWithReadline='NO'
             ;;
        *)   echo "I don't understand this option: --enable-readline-library=$enableval"
             exit 1
             ;;
    esac
fi



GhcWithSockets='NO'
# Check whether --enable-sockets-library or --disable-sockets-library was given.
if test "${enable_sockets_library+set}" = set; then
  enableval="$enable_sockets_library"
  case "$enableval" in
        yes) GhcWithSockets='YES'
             ;;
        no)  GhcWithSockets='NO'
             ;;
        *)   echo "I don't understand this option: --enable-sockets-library=$enableval"
             exit 1
             ;;
    esac
fi



BuildGHCI='NO'
# Check whether --enable-ghci or --disable-ghci was given.
if test "${enable_ghci+set}" = set; then
  enableval="$enable_ghci"
  case "$enableval" in
        yes) BuildGHCI='YES'
             ;;
        no)  BuildGHCI='NO'
             ;;
        *)   echo "I don't understand this option: --enable-ghci=$enableval"
             exit 1
             ;;
    esac
fi



# Here, by HACK means, we dump all the GhcBuild_ info
# into a file.  See comment above.
rm -f ghc/mkworld/buildinfo.jm
echo creating ghc/mkworld/buildinfo.jm
cat > ghc/mkworld/buildinfo.jm <<EOF
XCOMM ** DO NOT EDIT! **
XCOMM This file is obliterated every time 'configure' is run!

EOF
for xx in normal p t u mc mr mt mp mg 2s 1s du a b c d e f g h i j k l m n o A B ; do
    eval "yy=\$GhcBuild_$xx"
    echo "#ifndef GhcBuild_$xx"     >> ghc/mkworld/buildinfo.jm
    echo "#define GhcBuild_$xx $yy" >> ghc/mkworld/buildinfo.jm
    echo "#endif"		    >> ghc/mkworld/buildinfo.jm
done

# here ends a very big if DoingGHC = 'ghc' ...
fi

# -------------------------------------------------------------------------

if test "xxx$DoingHsLibs" = 'xxxhslibs' ; then
# a very big "if"!

WithHsLibsHc='haskell-compiler-unspecified'
WithHsLibsHcType='HC_UNSPECIFIED'

# Check whether --with-hc-for-hslibs or --without-hc-for-hslibs was given.
if test "${with_hc_for_hslibs+set}" = set; then
  withval="$with_hc_for_hslibs"
  case "$withval" in
        ghc* | glhc* )
                WithHsLibsHc=$withval
                ;;
        in-place )
                WithHsLibsHc='IN-PLACE'
                ;;
        *)      echo "I don't understand this option: --with-hc-for-hslibs=$withval"
                exit 1
                ;;
    esac
fi


# make sure that what they said makes sense.... set WithHsLibsHcType
case $WithHsLibsHc in
    haskell-compiler-unspecified ) # maybe they said something earlier...
	    if test $WithHc = 'haskell-compiler-unspecified' ; then
		echo "Neither --with-hc nor --with-hc-for-hslibs was properly set"
		exit 1
	    fi
	    ;;
    ghc* | glhc* )
	    WithHsLibsHcType='HC_GLASGOW_GHC'
            # Extract the first word of "$WithHsLibsHc", so it can be a program name with args.
set dummy $WithHsLibsHc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_have_ghc_hslibs'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$have_ghc_hslibs"; then
  ac_cv_prog_have_ghc_hslibs="$have_ghc_hslibs" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_have_ghc_hslibs="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
have_ghc_hslibs="$ac_cv_prog_have_ghc_hslibs"
if test -n "$have_ghc_hslibs"; then
  echo "$ac_t""$have_ghc_hslibs" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

            if test -z "$have_ghc_hslibs"; then
                echo "Can't find Glasgow Haskell to compile HsLibs with: $WithHsLibsHc"
		exit 1
            fi
            ;;
    IN-PLACE) WithHsLibsHcType='HC_GLASGOW_GHC'
	    ;;
esac



# Here, by HACK means, we dump all the GhcBuild_ info
# into a file.  See comment above.
rm -f hslibs/mkworld/buildinfo.jm
echo creating hslibs/mkworld/buildinfo.jm
cat > hslibs/mkworld/buildinfo.jm <<EOF
XCOMM ** DO NOT EDIT! **
XCOMM This file is obliterated every time 'configure' is run!

EOF

# here ends a very big if DoingHsLibs = 'hslibs' ...
fi
#
# -------------------------------------------------------------------------

if test "xxx$DoingHappy" = 'xxxhappy' ; then
# a very big "if"!

WithHappyHc='haskell-compiler-unspecified'
WithHappyHcType='HC_UNSPECIFIED'

# Check whether --with-hc-for-happy or --without-hc-for-happy was given.
if test "${with_hc_for_happy+set}" = set; then
  withval="$with_hc_for_happy"
  case "$withval" in
        ghc* | glhc* )
                WithHappyHc=$withval
                ;;
        hbc* )  WithHappyHc=$withval
                ;;
        nhc* )  WithHappyHc=$withval
                ;;
        in-place )
                WithHappyHc='IN-PLACE'
                ;;
        *)      echo "I don't understand this option: --with-hc-for-happy=$withval"
                exit 1
                ;;
    esac
fi


# make sure that what they said makes sense.... set WithHappyHcType
case $WithHappyHc in
    haskell-compiler-unspecified ) # maybe they said something earlier...
	    if test $WithHc = 'haskell-compiler-unspecified' ; then
		echo "Neither --with-hc nor --with-hc-for-happy was properly set"
		exit 1
	    fi
	    ;;
    ghc* | glhc* )
	    WithHappyHcType='HC_GLASGOW_GHC'
            # Extract the first word of "$WithHappyHc", so it can be a program name with args.
set dummy $WithHappyHc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_have_ghc_happy'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$have_ghc_happy"; then
  ac_cv_prog_have_ghc_happy="$have_ghc_happy" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_have_ghc_happy="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
have_ghc_happy="$ac_cv_prog_have_ghc_happy"
if test -n "$have_ghc_happy"; then
  echo "$ac_t""$have_ghc_happy" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

            if test -z "$have_ghc_happy"; then
                echo "Can't find Glasgow Haskell to compile Happy with: $WithHappyHc"
		exit 1
            fi
            ;;
    hbc* )  # Look for the dastardly competition
	    WithHappyHcType='HC_CHALMERS_HBC'
            # Extract the first word of "$WithHappyHc", so it can be a program name with args.
set dummy $WithHappyHc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_have_hbc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$have_hbc"; then
  ac_cv_prog_have_hbc="$have_hbc" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_have_hbc="YES"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_have_hbc" && ac_cv_prog_have_hbc="NO"
fi
fi
have_hbc="$ac_cv_prog_have_hbc"
if test -n "$have_hbc"; then
  echo "$ac_t""$have_hbc" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

            if test $have_hbc = 'NO' ; then
                echo "Can't find Chalmers HBC to compile with: $WithHappyHc"
                exit 1
            fi
            ;;
    nhc* )  # Look for Niklas Rojemo's "nhc"
	    WithHappyHcType='HC_ROJEMO_NHC'
            # Extract the first word of "$WithHappyHc", so it can be a program name with args.
set dummy $WithHappyHc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_have_nhc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$have_nhc"; then
  ac_cv_prog_have_nhc="$have_nhc" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_have_nhc="YES"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_have_nhc" && ac_cv_prog_have_nhc="NO"
fi
fi
have_nhc="$ac_cv_prog_have_nhc"
if test -n "$have_nhc"; then
  echo "$ac_t""$have_nhc" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

            if test $have_nhc = 'NO' ; then
                echo "Can't find Niklas Rojemo's NHC to compile with: $WithHappyHc"
                exit 1
            fi
            ;;
    IN-PLACE) WithHappyHcType='HC_GLASGOW_GHC'
	    ;;
esac



# here ends a very big if DoingHappy = 'happy' ...
fi
#
# -------------------------------------------------------------------------

if test "xxx$DoingHaggis" = 'xxxhaggis' ; then
# a very big "if"!

WithHaggisHc='haskell-compiler-unspecified'
WithHaggisHcType='HC_UNSPECIFIED'

# Check whether --with-hc-for-haggis or --without-hc-for-haggis was given.
if test "${with_hc_for_haggis+set}" = set; then
  withval="$with_hc_for_haggis"
  case "$withval" in
        ghc* | glhc* )
                WithHaggisHc=$withval
                ;;
        in-place )
                WithHaggisHc='IN-PLACE'
                ;;
        *)      echo "I don't understand this option: --with-hc-for-haggis=$withval"
                exit 1
                ;;
    esac
fi


# make sure that what they said makes sense.... set WithHaggisHcType
case $WithHaggisHc in
    haskell-compiler-unspecified ) # maybe they said something earlier...
	    if test $WithHc = 'haskell-compiler-unspecified' ; then
		echo "Neither --with-hc nor --with-hc-for-haggis was properly set"
		exit 1
	    fi
	    ;;
    ghc* | glhc* )
	    WithHaggisHcType='HC_GLASGOW_GHC'
            # Extract the first word of "$WithHaggisHc", so it can be a program name with args.
set dummy $WithHaggisHc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_have_ghc_haggis'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$have_ghc_haggis"; then
  ac_cv_prog_have_ghc_haggis="$have_ghc_haggis" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_have_ghc_haggis="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
have_ghc_haggis="$ac_cv_prog_have_ghc_haggis"
if test -n "$have_ghc_haggis"; then
  echo "$ac_t""$have_ghc_haggis" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

            if test -z "$have_ghc_haggis"; then
                echo "Can't find Glasgow Haskell to compile Haggis with: $WithHaggisHc"
		exit 1
            fi
            ;;
    IN-PLACE) WithHaggisHcType='HC_GLASGOW_GHC'
	    ;;
esac



# here ends a very big if DoingHaggis = 'haggis' ...
fi
#
# -------------------------------------------------------------------------

if test "xxx$DoingLiterate" = 'xxxliterate' ; then
# a very big "if"!

BuildInfoUtils='NO'
# Check whether --enable-info-utils or --disable-info-utils was given.
if test "${enable_info_utils+set}" = set; then
  enableval="$enable_info_utils"
  case "$enableval" in
        yes) BuildInfoUtils='YES'
             ;;
        no)  BuildInfoUtils='NO'
             ;;
        *)   echo "I don't understand this option: --enable-info-utils=$enableval"
             exit 1
             ;;
    esac
fi



# here ends a very big if DoingLiterate = 'literate' ...
fi
#
# -------------------------------------------------------------------------

if test "xxx$DoingNoFib" = 'xxxnofib' ; then
# a very big "if"!

WithNoFibHc='haskell-compiler-unspecified'
WithNoFibHcType='HC_UNSPECIFIED'

# Check whether --with-hc-for-nofib or --without-hc-for-nofib was given.
if test "${with_hc_for_nofib+set}" = set; then
  withval="$with_hc_for_nofib"
  case "$withval" in
        ghc* | glhc* )
                WithNoFibHc=$withval
                ;;
        hbc* )  WithNoFibHc=$withval
                ;;
        nhc* )  WithNoFibHc=$withval
                ;;
        in-place )
                WithNoFibHc='IN-PLACE'
                ;;
        *)      echo "I don't understand this option: --with-hc-for-nofib=$withval"
                exit 1
                ;;
    esac
fi


# make sure that what they said makes sense.... set WithHappyHcType
case $WithNoFibHc in
    haskell-compiler-unspecified ) # maybe they said something earlier...
	    if test $WithHc = 'haskell-compiler-unspecified' ; then
		echo "Neither --with-hc nor --with-hc-for-nofib was properly set"
		exit 1
	    fi
	    ;;
    ghc* | glhc* )
	    WithNoFibHcType='HC_GLASGOW_GHC'
            # Extract the first word of "$WithNoFibHc", so it can be a program name with args.
set dummy $WithNoFibHc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_have_ghc_nofib'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$have_ghc_nofib"; then
  ac_cv_prog_have_ghc_nofib="$have_ghc_nofib" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_have_ghc_nofib="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
have_ghc_nofib="$ac_cv_prog_have_ghc_nofib"
if test -n "$have_ghc_nofib"; then
  echo "$ac_t""$have_ghc_nofib" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

            if test -z "$have_ghc_nofib"; then
                echo "Can't find Glasgow Haskell to compile NoFib with: $WithNoFibHc"
		exit 1
            fi
            ;;
    hbc* )  # Look for the dastardly competition
	    WithNoFibHcType='HC_CHALMERS_HBC'
            # Extract the first word of "$WithNoFibHc", so it can be a program name with args.
set dummy $WithNoFibHc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_have_hbc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$have_hbc"; then
  ac_cv_prog_have_hbc="$have_hbc" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_have_hbc="YES"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_have_hbc" && ac_cv_prog_have_hbc="NO"
fi
fi
have_hbc="$ac_cv_prog_have_hbc"
if test -n "$have_hbc"; then
  echo "$ac_t""$have_hbc" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

            if test $have_hbc = 'NO' ; then
                echo "Can't find Chalmers HBC to compile NoFib with: $WithNoFibHc"
                exit 1
            fi
            ;;
    nhc* )  # Look for Niklas Rojemo's "nhc"
	    WithNoFibHcType='HC_ROJEMO_NHC'
            # Extract the first word of "$WithNoFibHc", so it can be a program name with args.
set dummy $WithNoFibHc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_have_nhc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$have_nhc"; then
  ac_cv_prog_have_nhc="$have_nhc" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_have_nhc="YES"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_have_nhc" && ac_cv_prog_have_nhc="NO"
fi
fi
have_nhc="$ac_cv_prog_have_nhc"
if test -n "$have_nhc"; then
  echo "$ac_t""$have_nhc" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

            if test $have_nhc = 'NO' ; then
                echo "Can't find Niklas Rojemo's NHC to compile NoFib with: $WithNoFibHc"
                exit 1
            fi
            ;;
    IN-PLACE) WithNoFibHcType='HC_GLASGOW_GHC'
	    ;;
esac



# Check whether --with-setup or --without-setup was given.
if test "${with_setup+set}" = set; then
  withval="$with_setup"
  case "$withval" in
        ghc )   MkWorldSetup='ghc'
                ;;
        hbc )   MkWorldSetup='hbc'
                ;;
        nhc )   MkWorldSetup='nhc'
		;;
        *)      echo "I don't understand this option: --with-setup=$withval"
                exit 1
                ;;
    esac
fi


if test $MkWorldSetup = 'std' ; then
    echo 'You must do --with-setup=... (one of: ghc, hbc, or nhc) for NoFib'
    exit 1
fi

# ---------------------------------------
# What sets of tests should be run.
#
IncludeRealNoFibTests='YES'	# defaults
IncludeSpectralNoFibTests='YES'
IncludeImaginaryNoFibTests='YES'
IncludeSpecialiseNoFibTests='NO'
IncludeGHC_ONLYNoFibTests='NO'
IncludePRIVATENoFibTests='NO'
IncludeParallelNoFibTests='NO'

# special catch-all variant
# Check whether --enable-all-tests or --disable-all-tests was given.
if test "${enable_all_tests+set}" = set; then
  enableval="$enable_all_tests"
  case "$enableval" in
        yes) IncludeGHC_ONLYNoFibTests='YES'
	     IncludeSpecialiseNoFibTests='YES'
	     IncludePRIVATENoFibTests='YES'
	     IncludeParallelNoFibTests='YES'
             ;;
        no)  IncludeGHC_ONLYNoFibTests='NO'
	     IncludeSpecialiseNoFibTests='NO'
	     IncludePRIVATENoFibTests='NO'
	     IncludeParallelNoFibTests='NO'

	     IncludeRealNoFibTests='NO'
	     IncludeSpectralNoFibTests='NO'
	     IncludeImaginaryNoFibTests='NO'
             ;;
        *)   echo "I don't understand this option: --enable-all-tests=$enableval"
             exit 1
             ;;
    esac
fi


# individual categories
# Check whether --enable-imaginary-tests or --disable-imaginary-tests was given.
if test "${enable_imaginary_tests+set}" = set; then
  enableval="$enable_imaginary_tests"
  case "$enableval" in
        yes) IncludeImaginaryNoFibTests='YES'
             ;;
        no)  IncludeImaginaryNoFibTests='NO'
             ;;
        *)   echo "I don't understand this option: --enable-imaginary-tests=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-spectral-tests or --disable-spectral-tests was given.
if test "${enable_spectral_tests+set}" = set; then
  enableval="$enable_spectral_tests"
  case "$enableval" in
        yes) IncludeSpectralNoFibTests='YES'
             ;;
        no)  IncludeSpectralNoFibTests='NO'
             ;;
        *)   echo "I don't understand this option: --enable-spectral-tests=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-real-tests or --disable-real-tests was given.
if test "${enable_real_tests+set}" = set; then
  enableval="$enable_real_tests"
  case "$enableval" in
        yes) IncludeRealNoFibTests='YES'
             ;;
        no)  IncludeRealNoFibTests='NO'
             ;;
        *)   echo "I don't understand this option: --enable-real-tests=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-GHC-ONLY-tests or --disable-GHC-ONLY-tests was given.
if test "${enable_GHC_ONLY_tests+set}" = set; then
  enableval="$enable_GHC_ONLY_tests"
  case "$enableval" in
        yes) IncludeGHC_ONLYNoFibTests='YES'
             ;;
        no)  IncludeGHC_ONLYNoFibTests='NO'
             ;;
        *)   echo "I don't understand this option: --enable-GHC-ONLY-tests=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-specialise-tests or --disable-specialise-tests was given.
if test "${enable_specialise_tests+set}" = set; then
  enableval="$enable_specialise_tests"
  case "$enableval" in
        yes) IncludeSpecialiseNoFibTests='YES'
             ;;
        no)  IncludeSpecialiseNoFibTests='NO'
             ;;
        *)   echo "I don't understand this option: --enable-specialise-tests=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-PRIVATE-tests or --disable-PRIVATE-tests was given.
if test "${enable_PRIVATE_tests+set}" = set; then
  enableval="$enable_PRIVATE_tests"
  case "$enableval" in
        yes) IncludePRIVATENoFibTests='YES'
             ;;
        no)  IncludePRIVATENoFibTests='NO'
             ;;
        *)   echo "I don't understand this option: --enable-PRIVATE-tests=$enableval"
             exit 1
             ;;
    esac
fi


# Check whether --enable-parallel-tests or --disable-parallel-tests was given.
if test "${enable_parallel_tests+set}" = set; then
  enableval="$enable_parallel_tests"
  case "$enableval" in
        yes) IncludeParallelNoFibTests='YES'
             ;;
        no)  IncludeParallelNoFibTests='NO'
             ;;
        *)   echo "I don't understand this option: --enable-parallel-tests=$enableval"
             exit 1
             ;;
    esac
fi



# Here, by HACK means, we dump all the Include*NoFibTests info
# into a file.  See comment above.
rm -f nofib/mkworld/buildinfo.jm
echo creating nofib/mkworld/buildinfo.jm
cat > nofib/mkworld/buildinfo.jm <<EOF
XCOMM ** DO NOT EDIT! **
XCOMM This file is obliterated every time 'configure' is run!

EOF
for xx in Real Spectral Imaginary GHC_ONLY Specialise PRIVATE Parallel ; do
    eval "yy=\$Include${xx}NoFibTests"
    echo "#ifndef Include${xx}NoFibTests"     >> nofib/mkworld/buildinfo.jm
    echo "#define Include${xx}NoFibTests $yy" >> nofib/mkworld/buildinfo.jm
    echo "#endif"			      >> nofib/mkworld/buildinfo.jm
done

# here ends a very big if DoingNoFib = 'nofib' ...
fi
#
# -------------------------------------------------------------------------
#


trap '' 1 2 15
cat > confcache <<\EOF
# This file is a shell script that caches the results of configure
# tests run on this system so they can be shared between configure
# scripts and configure runs.  It is not useful on other systems.
# If it contains results you don't want to keep, you may remove or edit it.
#
# By default, configure uses ./config.cache as the cache file,
# creating it if it does not exist already.  You can give configure
# the --cache-file=FILE option to use a different cache file; that is
# what configure does when it calls configure scripts in
# subdirectories, so they share the cache.
# Giving --cache-file=/dev/null disables caching, for debugging configure.
# config.status only pays attention to the cache file if you give it the
# --recheck option to rerun configure.
#
EOF
# Ultrix sh set writes to stderr and can't be redirected directly,
# and sets the high bit in the cache file unless we assign to the vars.
(set) 2>&1 |
  sed -n "s/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=\${\1='\2'}/p" \
  >> confcache
if cmp -s $cache_file confcache; then
  :
else
  if test -w $cache_file; then
    echo "updating cache $cache_file"
    cat confcache > $cache_file
  else
    echo "not updating unwritable cache $cache_file"
  fi
fi
rm -f confcache

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

test "x$prefix" = xNONE && prefix=$ac_default_prefix
# Let make expand exec_prefix.
test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'

# Any assignment to VPATH causes Sun make to only execute
# the first set of double-colon rules, so remove it if not needed.
# If there is a colon in the path, we need to keep it.
if test "x$srcdir" = x.; then
  ac_vpsub='/^[ 	]*VPATH[ 	]*=[^:]*$/d'
fi

trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15

DEFS=-DHAVE_CONFIG_H

# Without the "./", some shells look in PATH for config.status.
: ${CONFIG_STATUS=./config.status}

echo creating $CONFIG_STATUS
rm -f $CONFIG_STATUS
cat > $CONFIG_STATUS <<EOF
#! /bin/sh
# Generated automatically by configure.
# Run this file to recreate the current configuration.
# This directory was configured as follows,
# on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
#
# $0 $ac_configure_args
#
# Compiler output produced by configure, useful for debugging
# configure, is in ./config.log if it exists.

ac_cs_usage="Usage: $CONFIG_STATUS [--recheck] [--version] [--help]"
for ac_option
do
  case "\$ac_option" in
  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
    echo "running \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion"
    exec \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;
  -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
    echo "$CONFIG_STATUS generated by autoconf version 2.9"
    exit 0 ;;
  -help | --help | --hel | --he | --h)
    echo "\$ac_cs_usage"; exit 0 ;;
  *) echo "\$ac_cs_usage"; exit 1 ;;
  esac
done

ac_given_srcdir=$srcdir
ac_given_INSTALL="$INSTALL"

trap 'rm -fr `echo "Makefile STARTUP mkworld/site.jm mkworld/platform.h mkworld/config.h $ghc_mkworld_site_ghc_jm $ghc_includes_platform_h $hslibs_mkworld_site_hslibs_jm $nofib_mkworld_site_nofib_jm ghc/includes/config.h literate/config.h" | sed "s/:[^ ]*//g"` conftest*; exit 1' 1 2 15
EOF
cat >> $CONFIG_STATUS <<EOF

# Protect against being on the right side of a sed subst in config.status.
sed 's/%@/@@/; s/@%/@@/; s/%g\$/@g/; /@g\$/s/[\\\\&%]/\\\\&/g;
 s/@@/%@/; s/@@/@%/; s/@g\$/%g/' > conftest.subs <<\\CEOF
$ac_vpsub
$extrasub
s%@CFLAGS@%$CFLAGS%g
s%@CPPFLAGS@%$CPPFLAGS%g
s%@CXXFLAGS@%$CXXFLAGS%g
s%@DEFS@%$DEFS%g
s%@LDFLAGS@%$LDFLAGS%g
s%@LIBS@%$LIBS%g
s%@exec_prefix@%$exec_prefix%g
s%@prefix@%$prefix%g
s%@program_transform_name@%$program_transform_name%g
s%@bindir@%$bindir%g
s%@sbindir@%$sbindir%g
s%@libexecdir@%$libexecdir%g
s%@datadir@%$datadir%g
s%@sysconfdir@%$sysconfdir%g
s%@sharedstatedir@%$sharedstatedir%g
s%@localstatedir@%$localstatedir%g
s%@libdir@%$libdir%g
s%@includedir@%$includedir%g
s%@oldincludedir@%$oldincludedir%g
s%@infodir@%$infodir%g
s%@mandir@%$mandir%g
s%@DoingGHC@%$DoingGHC%g
s%@DoingHsLibs@%$DoingHsLibs%g
s%@DoingNoFib@%$DoingNoFib%g
s%@DoingHappy@%$DoingHappy%g
s%@DoingHaggis@%$DoingHaggis%g
s%@DoingLiterate@%$DoingLiterate%g
s%@DoingMkWorld@%$DoingMkWorld%g
s%@DoingGlaFpUtils@%$DoingGlaFpUtils%g
s%@HostPlatform@%$HostPlatform%g
s%@HostPlatform_CPP@%$HostPlatform_CPP%g
s%@HostArch_CPP@%$HostArch_CPP%g
s%@HostOS_CPP@%$HostOS_CPP%g
s%@HostVendor_CPP@%$HostVendor_CPP%g
s%@AT_GLASGOW@%$AT_GLASGOW%g
s%@PerlCmd@%$PerlCmd%g
s%@CC@%$CC%g
s%@HaveGcc@%$HaveGcc%g
s%@ContextDiffCmd@%$ContextDiffCmd%g
s%@YaccCmd@%$YaccCmd%g
s%@WhatCmd@%$WhatCmd%g
s%@LEX@%$LEX%g
s%@LEXLIB@%$LEXLIB%g
s%@have_ghc@%$have_ghc%g
s%@have_hbc@%$have_hbc%g
s%@have_nhc@%$have_nhc%g
s%@WithHc@%$WithHc%g
s%@WithHcType@%$WithHcType%g
s%@WhatGccIsCalled@%$WhatGccIsCalled%g
s%@MakeCmd@%$MakeCmd%g
s%@TmpDir@%$TmpDir%g
s%@HcMaxHeapWasSet@%$HcMaxHeapWasSet%g
s%@HcMaxHeap@%$HcMaxHeap%g
s%@MkDependHSCmd@%$MkDependHSCmd%g
s%@CPP@%$CPP%g
s%@GNUCPP@%$GNUCPP%g
s%@RAWCPP@%$RAWCPP%g
s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g
s%@INSTALL_DATA@%$INSTALL_DATA%g
s%@ArCmd@%$ArCmd%g
s%@RANLIB@%$RANLIB%g
s%@ALLOCA@%$ALLOCA%g
s%@have_ghc_ghc@%$have_ghc_ghc%g
s%@GhcBuilderVersion@%$GhcBuilderVersion%g
s%@WithGhcHc@%$WithGhcHc%g
s%@WithGhcHcType@%$WithGhcHcType%g
s%@GhcWithRegisterised@%$GhcWithRegisterised%g
s%@GhcWithHscBuiltViaC@%$GhcWithHscBuiltViaC%g
s%@GhcWithHscOptimised@%$GhcWithHscOptimised%g
s%@GhcWithHscDebug@%$GhcWithHscDebug%g
s%@GhcWithNativeCodeGen@%$GhcWithNativeCodeGen%g
s%@GhcWithDeforester@%$GhcWithDeforester%g
s%@GhcWithReadline@%$GhcWithReadline%g
s%@GhcWithSockets@%$GhcWithSockets%g
s%@BuildGHCI@%$BuildGHCI%g
s%@have_ghc_hslibs@%$have_ghc_hslibs%g
s%@WithHsLibsHc@%$WithHsLibsHc%g
s%@WithHsLibsHcType@%$WithHsLibsHcType%g
s%@have_ghc_happy@%$have_ghc_happy%g
s%@WithHappyHc@%$WithHappyHc%g
s%@WithHappyHcType@%$WithHappyHcType%g
s%@have_ghc_haggis@%$have_ghc_haggis%g
s%@WithHaggisHc@%$WithHaggisHc%g
s%@WithHaggisHcType@%$WithHaggisHcType%g
s%@BuildInfoUtils@%$BuildInfoUtils%g
s%@have_ghc_nofib@%$have_ghc_nofib%g
s%@WithNoFibHc@%$WithNoFibHc%g
s%@WithNoFibHcType@%$WithNoFibHcType%g
s%@MkWorldSetup@%$MkWorldSetup%g

CEOF
EOF
cat >> $CONFIG_STATUS <<EOF

CONFIG_FILES=\${CONFIG_FILES-"Makefile STARTUP mkworld/site.jm mkworld/platform.h mkworld/config.h $ghc_mkworld_site_ghc_jm $ghc_includes_platform_h $hslibs_mkworld_site_hslibs_jm $nofib_mkworld_site_nofib_jm"}
EOF
cat >> $CONFIG_STATUS <<\EOF
for ac_file in .. $CONFIG_FILES; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%.*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  # Adjust relative srcdir, etc. for subdirectories.

  # Remove last slash and all that follows it.  Not all systems have dirname.
  ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
  if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
    # The file is in a subdirectory.
    test ! -d "$ac_dir" && mkdir "$ac_dir"
    ac_dir_suffix="/`echo $ac_dir|sed 's%^\./%%'`"
    # A "../" for each directory in $ac_dir_suffix.
    ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
  else
    ac_dir_suffix= ac_dots=
  fi

  case "$ac_given_srcdir" in
  .)  srcdir=.
      if test -z "$ac_dots"; then top_srcdir=.
      else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
  /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
  *) # Relative path.
    srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
    top_srcdir="$ac_dots$ac_given_srcdir" ;;
  esac

  case "$ac_given_INSTALL" in
  [/$]*) INSTALL="$ac_given_INSTALL" ;;
  *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
  esac
  echo creating "$ac_file"
  rm -f "$ac_file"
  configure_input="Generated automatically from `echo $ac_file_in|sed 's%.*/%%'` by configure."
  case "$ac_file" in
  *Makefile*) ac_comsub="1i\\
# $configure_input" ;;
  *) ac_comsub= ;;
  esac
  sed -e "$ac_comsub
s%@configure_input@%$configure_input%g
s%@srcdir@%$srcdir%g
s%@top_srcdir@%$top_srcdir%g
s%@INSTALL@%$INSTALL%g
" -f conftest.subs $ac_given_srcdir/$ac_file_in > $ac_file
fi; done
rm -f conftest.subs

# These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
# NAME is the cpp macro being defined and VALUE is the value it is being given.
#
# ac_d sets the value in "#define NAME VALUE" lines.
ac_dA='s%^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
ac_dB='\([ 	][ 	]*\)[^ 	]*%\1#\2'
ac_dC='\3'
ac_dD='%g'
# ac_u turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
ac_uA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_uB='\([ 	]\)%\1#\2define\3'
ac_uC=' '
ac_uD='\4%g'
# ac_e turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
ac_eA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_eB='$%\1#\2define\3'
ac_eC=' '
ac_eD='%g'

CONFIG_HEADERS=${CONFIG_HEADERS-"ghc/includes/config.h literate/config.h"}
for ac_file in .. $CONFIG_HEADERS; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%.*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  echo creating $ac_file

  rm -f conftest.frag conftest.in conftest.out
  cp $ac_given_srcdir/$ac_file_in conftest.in

EOF

# Transform confdefs.h into a sed script conftest.vals that substitutes
# the proper values into config.h.in to produce config.h.  And first:
# Protect against being on the right side of a sed subst in config.status.
# Protect against being in an unquoted here document in config.status.
rm -f conftest.vals
cat > conftest.hdr <<\EOF
s/[\\&%]/\\&/g
s%[\\$`]%\\&%g
s%#define \([A-Za-z_][A-Za-z0-9_]*\) *\(.*\)%${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD}%gp
s%ac_d%ac_u%gp
s%ac_u%ac_e%gp
EOF
sed -n -f conftest.hdr confdefs.h > conftest.vals
rm -f conftest.hdr

# This sed command replaces #undef with comments.  This is necessary, for
# example, in the case of _POSIX_SOURCE, which is predefined and required
# on some systems where configure will not decide to define it.
cat >> conftest.vals <<\EOF
s%^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*%/* & */%
EOF

# Break up conftest.vals because some shells have a limit on
# the size of here documents, and old seds have small limits too.
# Maximum number of lines to put in a single here document.
ac_max_here_lines=12

rm -f conftest.tail
while :
do
  ac_lines=`grep -c . conftest.vals`
  # grep -c gives empty output for an empty file on some AIX systems.
  if test -z "$ac_lines" || test "$ac_lines" -eq 0; then break; fi
  # Write a limited-size here document to conftest.frag.
  echo '  cat > conftest.frag <<CEOF' >> $CONFIG_STATUS
  sed ${ac_max_here_lines}q conftest.vals >> $CONFIG_STATUS
  echo 'CEOF
  sed -f conftest.frag conftest.in > conftest.out
  rm -f conftest.in
  mv conftest.out conftest.in
' >> $CONFIG_STATUS
  sed 1,${ac_max_here_lines}d conftest.vals > conftest.tail
  rm -f conftest.vals
  mv conftest.tail conftest.vals
done
rm -f conftest.vals

cat >> $CONFIG_STATUS <<\EOF
  rm -f conftest.frag conftest.h
  echo "/* $ac_file.  Generated automatically by configure.  */" > conftest.h
  cat conftest.in >> conftest.h
  rm -f conftest.in
  if cmp -s $ac_file conftest.h 2>/dev/null; then
    echo "$ac_file is unchanged"
    rm -f conftest.h
  else
    rm -f $ac_file
    mv conftest.h $ac_file
  fi
fi; done



exit 0
EOF
chmod +x $CONFIG_STATUS
rm -fr confdefs* $ac_clean_files
test "$no_create" = yes || ${CONFIG_SHELL-/bin/sh} $CONFIG_STATUS || exit 1


echo '************************************************'
echo '*** NOW DO: sh < STARTUP'
echo '************************************************'
exit 0
